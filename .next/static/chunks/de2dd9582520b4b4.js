(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,80658,e=>{"use strict";var s=e.i(48277),a=e.i(99738);function r({children:e,className:r,variant:l="primary",size:t="md",isLoading:c=!1,loadingText:i,disabled:d,...n}){return(0,s.jsx)("button",{type:n.type||"button",className:(0,a.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-ring disabled:opacity-50 disabled:pointer-events-none disabled:cursor-not-allowed",{primary:"bg-primary text-primary-foreground hover:opacity-90 focus-visible:ring-primary",secondary:"bg-secondary text-secondary-foreground hover:opacity-90 focus-visible:ring-secondary",outline:"border border-border hover:bg-accent hover:text-accent-foreground focus-visible:ring-border",ghost:"hover:bg-accent hover:text-accent-foreground focus-visible:ring-accent",danger:"bg-destructive text-destructive-foreground hover:opacity-90 focus-visible:ring-destructive"}[l],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[t],r),disabled:d||c,"aria-live":c?"polite":void 0,"aria-busy":c,...n,children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",role:"img",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,s.jsx)("span",{children:i||"Loading..."})]}):e})}e.s(["default",()=>r])},36291,e=>{"use strict";var s=e.i(48277);let a=({className:e=""})=>(0,s.jsx)("div",{className:`animate-pulse rounded-md bg-muted ${e}`,role:"status","aria-label":"Loading",children:(0,s.jsx)("span",{className:"sr-only",children:"Loading..."})});e.s(["CategoryCardSkeleton",0,({count:e=1})=>(0,s.jsx)(s.Fragment,{children:Array.from({length:e}).map((e,r)=>(0,s.jsxs)("div",{className:"rounded-lg border bg-card p-6",children:[(0,s.jsx)("div",{className:"flex justify-center mb-4",children:(0,s.jsx)("div",{className:"w-16 h-16 rounded-full bg-muted animate-pulse"})}),(0,s.jsx)(a,{className:"h-6 w-3/4 mx-auto mb-3"}),(0,s.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,s.jsx)(a,{className:"h-3 w-full"}),(0,s.jsx)(a,{className:"h-3 w-2/3 mx-auto"})]}),(0,s.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,s.jsx)(a,{className:"h-4 w-24"})}),(0,s.jsx)(a,{className:"h-9 w-full"})]},r))}),"MessageListSkeleton",0,({count:e=5})=>(0,s.jsx)("div",{className:"space-y-2",children:Array.from({length:e}).map((e,r)=>(0,s.jsxs)("div",{className:"flex items-center gap-4 p-4 rounded-lg border bg-card hover:bg-accent/50",children:[(0,s.jsx)(a,{className:"h-12 w-12 rounded-full flex-shrink-0"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0 space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(a,{className:"h-4 w-32"}),(0,s.jsx)(a,{className:"h-3 w-20"})]}),(0,s.jsx)(a,{className:"h-3 w-3/4"})]})]},r))}),"OrderDetailSkeleton",0,()=>(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(a,{className:"h-8 w-64"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(a,{className:"h-6 w-24 rounded-full"}),(0,s.jsx)(a,{className:"h-6 w-32 rounded-full"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"rounded-lg border bg-card p-6 space-y-2",children:[(0,s.jsx)(a,{className:"h-4 w-20"}),(0,s.jsx)(a,{className:"h-6 w-32"})]}),(0,s.jsxs)("div",{className:"rounded-lg border bg-card p-6 space-y-2",children:[(0,s.jsx)(a,{className:"h-4 w-20"}),(0,s.jsx)(a,{className:"h-6 w-32"})]}),(0,s.jsxs)("div",{className:"rounded-lg border bg-card p-6 space-y-2",children:[(0,s.jsx)(a,{className:"h-4 w-20"}),(0,s.jsx)(a,{className:"h-6 w-32"})]})]}),(0,s.jsx)("div",{className:"rounded-lg border bg-card p-6",children:(0,s.jsxs)("div",{className:"flex gap-6",children:[(0,s.jsx)(a,{className:"w-32 h-32 rounded-lg"}),(0,s.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,s.jsx)(a,{className:"h-6 w-3/4"}),(0,s.jsx)(a,{className:"h-4 w-full"}),(0,s.jsx)(a,{className:"h-4 w-2/3"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(a,{className:"h-4 w-24"}),(0,s.jsx)(a,{className:"h-4 w-24"})]})]})]})}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(a,{className:"h-10 w-32"}),(0,s.jsx)(a,{className:"h-10 w-32"})]})]}),"OrderListSkeleton",0,({count:e=5})=>(0,s.jsx)("div",{className:"space-y-4",children:Array.from({length:e}).map((e,r)=>(0,s.jsx)("div",{className:"rounded-lg border bg-card p-6",children:(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("div",{className:"w-20 h-20 rounded-lg bg-muted animate-pulse flex-shrink-0"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)(a,{className:"h-4 w-3/4"}),(0,s.jsx)(a,{className:"h-3 w-1/2"})]}),(0,s.jsx)(a,{className:"h-6 w-16 rounded-full"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(a,{className:"h-4 w-24"}),(0,s.jsx)(a,{className:"h-6 w-20"})]}),(0,s.jsx)(a,{className:"h-3 w-32"})]})]})},r))}),"PageHeaderSkeleton",0,({showSubtitle:e=!0,showActions:r=!0})=>(0,s.jsx)("div",{className:"mb-8 space-y-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(a,{className:"h-8 w-64"}),e&&(0,s.jsx)(a,{className:"h-4 w-96"})]}),r&&(0,s.jsx)(a,{className:"h-10 w-32"})]})}),"ProductCardHorizontalSkeleton",0,({count:e=5})=>(0,s.jsx)("div",{className:"space-y-4",children:Array.from({length:e}).map((e,r)=>(0,s.jsx)("div",{className:"rounded-lg border bg-card overflow-hidden",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,s.jsx)("div",{className:"w-full md:w-48 h-48 bg-muted animate-pulse flex-shrink-0"}),(0,s.jsxs)("div",{className:"flex-1 p-6 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)(a,{className:"h-5 w-3/4"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(a,{className:"h-4 w-24"}),(0,s.jsx)(a,{className:"h-4 w-32"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(a,{className:"h-6 w-16 rounded-full"}),(0,s.jsx)(a,{className:"h-6 w-16 rounded-full"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(a,{className:"h-3 w-full"}),(0,s.jsx)(a,{className:"h-3 w-2/3"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,s.jsx)(a,{className:"h-4 w-24"}),(0,s.jsx)(a,{className:"h-4 w-24"}),(0,s.jsx)(a,{className:"h-4 w-24"})]}),(0,s.jsxs)("div",{className:"flex gap-2 md:w-48",children:[(0,s.jsx)(a,{className:"h-10 flex-1"}),(0,s.jsx)(a,{className:"h-10 flex-1"}),(0,s.jsx)(a,{className:"h-10 w-12"})]})]})]})},r))}),"ProductCardSkeleton",0,({count:e=1})=>(0,s.jsx)(s.Fragment,{children:Array.from({length:e}).map((e,r)=>(0,s.jsxs)("div",{className:"rounded-lg border bg-card overflow-hidden",children:[(0,s.jsx)("div",{className:"aspect-square w-full bg-muted animate-pulse"}),(0,s.jsxs)("div",{className:"p-4 space-y-3",children:[(0,s.jsx)(a,{className:"h-4 w-3/4"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(a,{className:"h-5 w-1/3"}),(0,s.jsx)(a,{className:"h-3 w-1/4"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(a,{className:"h-3 w-full"}),(0,s.jsx)(a,{className:"h-3 w-full"}),(0,s.jsx)(a,{className:"h-3 w-2/3"})]}),(0,s.jsx)(a,{className:"h-10 w-full"})]})]},r))}),"ProductDetailSkeleton",0,()=>(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(a,{className:"aspect-square w-full rounded-lg"}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2",children:Array.from({length:4}).map((e,r)=>(0,s.jsx)(a,{className:"aspect-square rounded-lg"},r))})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(a,{className:"h-8 w-3/4"}),(0,s.jsx)(a,{className:"h-6 w-1/3"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(a,{className:"h-6 w-16 rounded-full"}),(0,s.jsx)(a,{className:"h-6 w-16 rounded-full"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(a,{className:"h-4 w-full"}),(0,s.jsx)(a,{className:"h-4 w-full"}),(0,s.jsx)(a,{className:"h-4 w-2/3"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(a,{className:"h-4 w-32"}),(0,s.jsx)(a,{className:"h-4 w-40"})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(a,{className:"h-12 flex-1"}),(0,s.jsx)(a,{className:"h-12 w-16"})]}),(0,s.jsx)(a,{className:"h-10 w-full"})]})]}),(0,s.jsxs)("div",{className:"rounded-lg border bg-card p-6",children:[(0,s.jsx)(a,{className:"h-6 w-32 mb-4"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(a,{className:"h-16 w-16 rounded-full"}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)(a,{className:"h-5 w-48"}),(0,s.jsx)(a,{className:"h-4 w-64"})]}),(0,s.jsx)(a,{className:"h-10 w-32"})]})]})]}),"ProfileSkeleton",0,({showAvatar:e=!0,showStats:r=!0})=>(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"rounded-lg border bg-card p-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-6",children:[e&&(0,s.jsx)("div",{children:(0,s.jsx)(a,{className:"h-24 w-24 rounded-full"})}),(0,s.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,s.jsx)(a,{className:"h-8 w-48"}),(0,s.jsx)(a,{className:"h-4 w-64"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(a,{className:"h-4 w-32"}),(0,s.jsx)(a,{className:"h-4 w-32"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(a,{className:"h-10 w-32"}),(0,s.jsx)(a,{className:"h-10 w-32"})]})]})}),r&&(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:Array.from({length:4}).map((e,r)=>(0,s.jsxs)("div",{className:"rounded-lg border bg-card p-6",children:[(0,s.jsx)(a,{className:"h-5 w-24 mb-2"}),(0,s.jsx)(a,{className:"h-8 w-16"})]},r))}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(a,{className:"h-6 w-48"}),(0,s.jsx)("div",{className:"space-y-3",children:Array.from({length:3}).map((e,r)=>(0,s.jsx)("div",{className:"rounded-lg border bg-card p-4",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(a,{className:"h-4 w-3/4"}),(0,s.jsx)(a,{className:"h-3 w-full"}),(0,s.jsx)(a,{className:"h-3 w-2/3"})]})},r))})]})]}),"StatsCardsSkeleton",0,({count:e=4})=>(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:e}).map((e,r)=>(0,s.jsxs)("div",{className:"rounded-lg border bg-card p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)(a,{className:"h-5 w-24"}),(0,s.jsx)(a,{className:"h-4 w-4"})]}),(0,s.jsx)(a,{className:"h-8 w-16"})]},r))}),"TableSkeleton",0,({rows:e=5,columns:r=5,showAvatar:l=!1})=>(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("div",{className:"flex items-center gap-4 px-4 py-3 border-b",children:Array.from({length:r}).map((e,r)=>(0,s.jsx)(a,{className:"h-5 flex-1"},r))}),Array.from({length:e}).map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-4 px-4 py-4 border-b",children:[l&&(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(a,{className:"h-10 w-10 rounded-full"})}),Array.from({length:r}).map((e,r)=>(0,s.jsx)(a,{className:"h-4 flex-1"},r))]},t))]})])},38116,e=>{"use strict";var s=e.i(48277),a=e.i(99738);function r({children:e,className:r}){return(0,s.jsx)("div",{className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),children:e})}function l({children:e,className:r}){return(0,s.jsx)("div",{className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),children:e})}function t({children:e,className:r}){return(0,s.jsx)("h3",{className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),children:e})}function c({children:e,className:r}){return(0,s.jsx)("p",{className:(0,a.cn)("text-sm text-muted-foreground",r),children:e})}function i({children:e,className:r}){return(0,s.jsx)("div",{className:(0,a.cn)("p-6 pt-0",r),children:e})}e.s(["Card",()=>r,"CardContent",()=>i,"CardDescription",()=>c,"CardHeader",()=>l,"CardTitle",()=>t])},35384,e=>{"use strict";var s=e.i(48277),a=e.i(30668),r=e.i(46669);class l extends a.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){console.error("ClientErrorBoundary caught an error:",e,s)}resetError=()=>{this.setState({hasError:!1,error:null})};render(){if(this.state.hasError){let e=this.props.fallback||r.ErrorFallback;return(0,s.jsx)(e,{error:this.state.error,resetError:this.resetError})}return this.props.children}}e.s(["ClientErrorBoundary",()=>l])},59484,e=>{"use strict";let s=(0,e.i(35884).default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);e.s(["Package",()=>s],59484)},50042,e=>{"use strict";var s=e.i(48277),a=e.i(30668),r=e.i(99738);function l({label:e,error:l,helperText:t,className:c,id:i,...d}){let n=a.default.useId(),o=i||n,m=l?`${o}-error`:void 0,x=t?`${o}-helper`:void 0,u=[m,x].filter(Boolean).join(" ")||void 0;return(0,s.jsxs)("div",{className:"w-full",children:[e&&(0,s.jsxs)("label",{htmlFor:o,className:"block text-sm font-medium mb-1.5 text-foreground",children:[e,d.required&&(0,s.jsx)("span",{className:"text-destructive ml-1","aria-label":"required",children:"*"})]}),(0,s.jsx)("input",{id:o,"aria-invalid":l?"true":"false","aria-describedby":u,"aria-required":d.required?"true":void 0,className:(0,r.cn)("w-full px-4 py-2.5 rounded-lg border border-input bg-background text-foreground","placeholder:text-muted-foreground","focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent focus-visible:ring-2 focus-visible:ring-offset-2","disabled:opacity-50 disabled:cursor-not-allowed",l&&"border-destructive focus:ring-destructive focus-visible:ring-destructive",c),...d}),l&&(0,s.jsx)("p",{id:m,className:"mt-1 text-sm text-destructive",role:"alert","aria-live":"assertive",children:l}),t&&!l&&(0,s.jsx)("p",{id:x,className:"mt-1 text-sm text-muted-foreground",children:t})]})}e.s(["default",()=>l])},3333,e=>{"use strict";let s=(0,e.i(35884).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>s],3333)},33189,e=>{"use strict";let s=(0,e.i(35884).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>s],33189)},216,e=>{"use strict";let s=(0,e.i(35884).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>s],216)},58904,e=>{"use strict";let s=(0,e.i(35884).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>s],58904)},52324,e=>{"use strict";var s=e.i(48277),a=e.i(30668),r=e.i(16506),l=e.i(46471),t=e.i(42854),c=e.i(33189);let i=(0,e.i(35884).default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);var d=e.i(3333),n=e.i(58904),o=e.i(49449),m=e.i(216),x=e.i(87635),u=e.i(59484),h=e.i(32890),j=e.i(40206),g=e.i(64076),f=e.i(45932),p=e.i(38116),N=e.i(80658),v=e.i(50042),y=e.i(36291),b=e.i(35384);e.i(92544);var w=e.i(11897);function C(){return(0,s.jsx)(b.ClientErrorBoundary,{children:(0,s.jsx)(k,{})})}function k(){let{isAdmin:e}=(0,j.useAuth)(),[b,C]=(0,a.useState)([]),[k,A]=(0,a.useState)(!0),[S,P]=(0,a.useState)(!1),[F,E]=(0,a.useState)(!1),[T,H]=(0,a.useState)(null),[_,z]=(0,a.useState)(!1),[L,M]=(0,a.useState)(null),[B,I]=(0,a.useState)(null),[q,D]=(0,a.useState)(""),{register:$,handleSubmit:V,reset:O,formState:{errors:R,isSubmitting:U},setError:X}=(0,l.useForm)({resolver:(0,t.zodResolver)(f.categorySchema),mode:"onBlur",defaultValues:{isActive:!0}});(0,a.useEffect)(()=>{if(!e){I({type:"error",text:"Access denied. Admin only."}),A(!1);return}K()},[e]);let K=(0,a.useCallback)(async()=>{if(e)try{A(!0);let e=(await g.categoriesAPI.getCategories()).data.categories;if(q){let s=q.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(s)||e.description&&e.description.toLowerCase().includes(s))}C(e)}catch(e){console.error("Failed to fetch categories:",e),w.toast.error("Failed to load categories. Please try again."),I({type:"error",text:"Failed to load categories. Please try again."})}finally{A(!1)}},[e,q]);(0,a.useEffect)(()=>{let e=setTimeout(()=>{K()},500);return()=>clearTimeout(e)},[q,K]);let G=()=>{P(!1),E(!1),H(null),O({name:"",description:"",icon:"",image:"",isActive:!0})},W=async e=>{try{if(z(!0),F&&T)await g.categoriesAPI.updateCategory(T._id,{name:e.name,description:e.description||void 0,icon:e.icon||void 0,image:e.image||void 0,isActive:e.isActive}),C(b.map(s=>s._id===T._id?{...s,...e,productCount:s.productCount}:s)),I({type:"success",text:"Category updated successfully"}),w.toast.success("Category updated successfully");else{let s={...(await g.categoriesAPI.createCategory({name:e.name,description:e.description||void 0,icon:e.icon||void 0,image:e.image||void 0})).data.category,productCount:0};C([...b,s]),I({type:"success",text:"Category created successfully"}),w.toast.success("Category created successfully")}G()}catch(s){console.error("Failed to save category:",s);let e=s instanceof Error&&"response"in s&&s.response?.data?.message||"Failed to save category";I({type:"error",text:e}),X("root",{type:"manual",message:e}),w.toast.error(e)}finally{z(!1)}},Y=async e=>{let s=b.find(s=>s._id===e);if(s&&s.productCount>0){let e=`Cannot delete category with ${s.productCount} products. Please reassign products first.`;I({type:"error",text:e}),w.toast.error(e);return}if(confirm("Are you sure you want to delete this category? This action cannot be undone."))try{M(e),await g.categoriesAPI.deleteCategory(e),C(b.filter(s=>s._id!==e)),I({type:"success",text:"Category deleted successfully"}),w.toast.success("Category deleted successfully")}catch(s){console.error("Failed to delete category:",s);let e="Failed to delete category. Please try again.";I({type:"error",text:e}),w.toast.error(e)}finally{M(null)}},J=async e=>{try{await g.categoriesAPI.updateCategory(e._id,{isActive:!e.isActive}),C(b.map(s=>s._id===e._id?{...s,isActive:!s.isActive}:s)),I({type:"success",text:`Category ${e.isActive?"deactivated":"activated"} successfully`})}catch(e){console.error("Failed to toggle category status:",e),w.toast.error("Failed to update category status. Please try again."),I({type:"error",text:"Failed to update category status. Please try again."})}};if(!e)return(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsx)(p.Card,{className:"max-w-md mx-auto",children:(0,s.jsx)(p.CardContent,{className:"py-8",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(i,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Access Denied"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"You don't have permission to access this page."})]})})})});if(k)return(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsx)(y.PageHeaderSkeleton,{showSubtitle:!0,showActions:!0}),(0,s.jsx)(y.TableSkeleton,{rows:8,columns:5})]});let Q=b.filter(e=>e.isActive).length,Z=b.filter(e=>!e.isActive).length,ee=b.reduce((e,s)=>e+(s.productCount||0),0);return(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)(r.default,{href:"/admin",className:"inline-flex items-center text-muted-foreground hover:text-foreground mb-4",children:[(0,s.jsx)(c.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Category Management"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Manage product categories"})]}),(0,s.jsxs)(N.default,{onClick:()=>{O({name:"",description:"",icon:"",image:"",isActive:!0}),P(!0)},className:"flex items-center",children:[(0,s.jsx)(d.Plus,{className:"h-4 w-4 mr-2"}),"New Category"]})]})]}),B&&(0,s.jsx)("div",{className:`mb-6 p-4 rounded-lg ${"success"===B.type?"bg-green-50 text-green-900 dark:bg-green-900/20 dark:text-green-200":"bg-red-50 text-red-900 dark:bg-red-900/20 dark:text-red-200"}`,children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:B.text}),(0,s.jsx)("button",{onClick:()=>I(null),className:"ml-4 hover:opacity-70",children:(0,s.jsx)(x.X,{className:"h-4 w-4"})})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,s.jsxs)(p.Card,{children:[(0,s.jsxs)(p.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(p.CardTitle,{className:"text-sm font-medium",children:"Total Categories"}),(0,s.jsx)(i,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(p.CardContent,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:b.length})})]}),(0,s.jsxs)(p.Card,{children:[(0,s.jsxs)(p.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(p.CardTitle,{className:"text-sm font-medium",children:"Active"}),(0,s.jsx)(m.Check,{className:"h-4 w-4 text-green-600"})]}),(0,s.jsx)(p.CardContent,{children:(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600",children:Q})})]}),(0,s.jsxs)(p.Card,{children:[(0,s.jsxs)(p.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(p.CardTitle,{className:"text-sm font-medium",children:"Inactive"}),(0,s.jsx)(x.X,{className:"h-4 w-4 text-gray-600"})]}),(0,s.jsx)(p.CardContent,{children:(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-600",children:Z})})]}),(0,s.jsxs)(p.Card,{children:[(0,s.jsxs)(p.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(p.CardTitle,{className:"text-sm font-medium",children:"Total Products"}),(0,s.jsx)(u.Package,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(p.CardContent,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:ee})})]})]}),(0,s.jsx)(p.Card,{className:"mb-6",children:(0,s.jsx)(p.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(h.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)("input",{type:"text",placeholder:"Search by name or description...",value:q,onChange:e=>D(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})})}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:0===b.length?(0,s.jsx)(p.Card,{className:"col-span-full",children:(0,s.jsx)(p.CardContent,{className:"py-12",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(i,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No Categories Found"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:q?"Try adjusting your search terms.":"Get started by creating your first category."})]})})}):b.map(e=>(0,s.jsxs)(p.Card,{className:e.isActive?"":"opacity-60",children:[(0,s.jsx)(p.CardHeader,{children:(0,s.jsx)("div",{className:"flex items-start justify-between",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[e.icon?(0,s.jsx)("div",{className:"text-3xl",children:e.icon}):(0,s.jsx)("div",{className:"w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,s.jsx)(i,{className:"h-6 w-6 text-primary"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(p.CardTitle,{className:"text-lg",children:e.name}),e.description&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:e.description})]})]})})}),(0,s.jsx)(p.CardContent,{children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Products:"}),(0,s.jsx)("span",{className:"font-medium",children:e.productCount||0})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Status:"}),(0,s.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${e.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}`,children:e.isActive?"Active":"Inactive"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Slug:"}),(0,s.jsx)("span",{className:"font-mono text-xs",children:e.slug})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 pt-2 border-t",children:[(0,s.jsx)(N.default,{onClick:()=>J(e),disabled:L===e._id,size:"sm",variant:"outline",className:"flex-1",children:e.isActive?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.X,{className:"h-3 w-3 mr-1"}),"Deactivate"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Check,{className:"h-3 w-3 mr-1"}),"Activate"]})}),(0,s.jsx)(N.default,{onClick:()=>{H(e),O({name:e.name,description:e.description||"",icon:e.icon||"",image:e.image||"",isActive:e.isActive}),E(!0)},disabled:L===e._id,size:"sm",variant:"outline",children:(0,s.jsx)(n.Edit,{className:"h-3 w-3"})}),(0,s.jsx)(N.default,{onClick:()=>Y(e._id),disabled:L===e._id||(e.productCount||0)>0,size:"sm",variant:"danger",children:L===e._id?"...":(0,s.jsx)(o.Trash2,{className:"h-3 w-3"})})]})]})})]},e._id))}),(S||F)&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-background rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:F?"Edit Category":"Create New Category"}),R.root&&(0,s.jsx)("div",{className:"mb-4 p-3 rounded-lg bg-destructive/10 text-destructive text-sm",children:R.root.message}),(0,s.jsxs)("form",{onSubmit:V(W),className:"space-y-4",noValidate:!0,children:[(0,s.jsx)(v.default,{label:"Name",type:"text",placeholder:"e.g., Electronics",error:R.name?.message,...$("name")}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Description"}),(0,s.jsx)("textarea",{...$("description"),placeholder:"Brief description of the category...",rows:3,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 resize-none ${R.description?"border-destructive focus:ring-destructive":"border-input focus:ring-primary"}`}),R.description&&(0,s.jsx)("p",{className:"mt-1 text-sm text-destructive",children:R.description.message})]}),(0,s.jsx)(v.default,{label:"Icon (Emoji)",type:"text",placeholder:"e.g., ðŸ’»",error:R.icon?.message,...$("icon")}),(0,s.jsx)(v.default,{label:"Image URL",type:"url",placeholder:"https://example.com/image.jpg",error:R.image?.message,...$("image")}),F&&(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"isActive",...$("isActive"),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),(0,s.jsx)("label",{htmlFor:"isActive",className:"text-sm font-medium",children:"Active (visible to users)"})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,s.jsx)(N.default,{type:"button",onClick:G,variant:"outline",disabled:_,children:"Cancel"}),(0,s.jsx)(N.default,{type:"submit",isLoading:_,children:_?"Saving...":F?"Update":"Create"})]})]})]})})]})}e.s(["default",()=>C],52324)}]);