(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,80658,e=>{"use strict";var s=e.i(48277),a=e.i(99738);function l({children:e,className:l,variant:r="primary",size:c="md",isLoading:i=!1,loadingText:d,disabled:t,...n}){return(0,s.jsx)("button",{type:n.type||"button",className:(0,a.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-ring disabled:opacity-50 disabled:pointer-events-none disabled:cursor-not-allowed",{primary:"bg-primary text-primary-foreground hover:opacity-90 focus-visible:ring-primary",secondary:"bg-secondary text-secondary-foreground hover:opacity-90 focus-visible:ring-secondary",outline:"border border-border hover:bg-accent hover:text-accent-foreground focus-visible:ring-border",ghost:"hover:bg-accent hover:text-accent-foreground focus-visible:ring-accent",danger:"bg-destructive text-destructive-foreground hover:opacity-90 focus-visible:ring-destructive"}[r],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[c],l),disabled:t||i,"aria-live":i?"polite":void 0,"aria-busy":i,...n,children:i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",role:"img",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,s.jsx)("span",{children:d||"Loading..."})]}):e})}e.s(["default",()=>l])},36291,e=>{"use strict";var s=e.i(48277);let a=({className:e=""})=>(0,s.jsx)("div",{className:`animate-pulse rounded-md bg-muted ${e}`,role:"status","aria-label":"Loading",children:(0,s.jsx)("span",{className:"sr-only",children:"Loading..."})});e.s(["CategoryCardSkeleton",0,({count:e=1})=>(0,s.jsx)(s.Fragment,{children:Array.from({length:e}).map((e,l)=>(0,s.jsxs)("div",{className:"rounded-lg border bg-card p-6",children:[(0,s.jsx)("div",{className:"flex justify-center mb-4",children:(0,s.jsx)("div",{className:"w-16 h-16 rounded-full bg-muted animate-pulse"})}),(0,s.jsx)(a,{className:"h-6 w-3/4 mx-auto mb-3"}),(0,s.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,s.jsx)(a,{className:"h-3 w-full"}),(0,s.jsx)(a,{className:"h-3 w-2/3 mx-auto"})]}),(0,s.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,s.jsx)(a,{className:"h-4 w-24"})}),(0,s.jsx)(a,{className:"h-9 w-full"})]},l))}),"MessageListSkeleton",0,({count:e=5})=>(0,s.jsx)("div",{className:"space-y-2",children:Array.from({length:e}).map((e,l)=>(0,s.jsxs)("div",{className:"flex items-center gap-4 p-4 rounded-lg border bg-card hover:bg-accent/50",children:[(0,s.jsx)(a,{className:"h-12 w-12 rounded-full flex-shrink-0"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0 space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(a,{className:"h-4 w-32"}),(0,s.jsx)(a,{className:"h-3 w-20"})]}),(0,s.jsx)(a,{className:"h-3 w-3/4"})]})]},l))}),"OrderDetailSkeleton",0,()=>(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(a,{className:"h-8 w-64"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(a,{className:"h-6 w-24 rounded-full"}),(0,s.jsx)(a,{className:"h-6 w-32 rounded-full"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"rounded-lg border bg-card p-6 space-y-2",children:[(0,s.jsx)(a,{className:"h-4 w-20"}),(0,s.jsx)(a,{className:"h-6 w-32"})]}),(0,s.jsxs)("div",{className:"rounded-lg border bg-card p-6 space-y-2",children:[(0,s.jsx)(a,{className:"h-4 w-20"}),(0,s.jsx)(a,{className:"h-6 w-32"})]}),(0,s.jsxs)("div",{className:"rounded-lg border bg-card p-6 space-y-2",children:[(0,s.jsx)(a,{className:"h-4 w-20"}),(0,s.jsx)(a,{className:"h-6 w-32"})]})]}),(0,s.jsx)("div",{className:"rounded-lg border bg-card p-6",children:(0,s.jsxs)("div",{className:"flex gap-6",children:[(0,s.jsx)(a,{className:"w-32 h-32 rounded-lg"}),(0,s.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,s.jsx)(a,{className:"h-6 w-3/4"}),(0,s.jsx)(a,{className:"h-4 w-full"}),(0,s.jsx)(a,{className:"h-4 w-2/3"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(a,{className:"h-4 w-24"}),(0,s.jsx)(a,{className:"h-4 w-24"})]})]})]})}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(a,{className:"h-10 w-32"}),(0,s.jsx)(a,{className:"h-10 w-32"})]})]}),"OrderListSkeleton",0,({count:e=5})=>(0,s.jsx)("div",{className:"space-y-4",children:Array.from({length:e}).map((e,l)=>(0,s.jsx)("div",{className:"rounded-lg border bg-card p-6",children:(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("div",{className:"w-20 h-20 rounded-lg bg-muted animate-pulse flex-shrink-0"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)(a,{className:"h-4 w-3/4"}),(0,s.jsx)(a,{className:"h-3 w-1/2"})]}),(0,s.jsx)(a,{className:"h-6 w-16 rounded-full"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(a,{className:"h-4 w-24"}),(0,s.jsx)(a,{className:"h-6 w-20"})]}),(0,s.jsx)(a,{className:"h-3 w-32"})]})]})},l))}),"PageHeaderSkeleton",0,({showSubtitle:e=!0,showActions:l=!0})=>(0,s.jsx)("div",{className:"mb-8 space-y-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(a,{className:"h-8 w-64"}),e&&(0,s.jsx)(a,{className:"h-4 w-96"})]}),l&&(0,s.jsx)(a,{className:"h-10 w-32"})]})}),"ProductCardHorizontalSkeleton",0,({count:e=5})=>(0,s.jsx)("div",{className:"space-y-4",children:Array.from({length:e}).map((e,l)=>(0,s.jsx)("div",{className:"rounded-lg border bg-card overflow-hidden",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,s.jsx)("div",{className:"w-full md:w-48 h-48 bg-muted animate-pulse flex-shrink-0"}),(0,s.jsxs)("div",{className:"flex-1 p-6 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)(a,{className:"h-5 w-3/4"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(a,{className:"h-4 w-24"}),(0,s.jsx)(a,{className:"h-4 w-32"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(a,{className:"h-6 w-16 rounded-full"}),(0,s.jsx)(a,{className:"h-6 w-16 rounded-full"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(a,{className:"h-3 w-full"}),(0,s.jsx)(a,{className:"h-3 w-2/3"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,s.jsx)(a,{className:"h-4 w-24"}),(0,s.jsx)(a,{className:"h-4 w-24"}),(0,s.jsx)(a,{className:"h-4 w-24"})]}),(0,s.jsxs)("div",{className:"flex gap-2 md:w-48",children:[(0,s.jsx)(a,{className:"h-10 flex-1"}),(0,s.jsx)(a,{className:"h-10 flex-1"}),(0,s.jsx)(a,{className:"h-10 w-12"})]})]})]})},l))}),"ProductCardSkeleton",0,({count:e=1})=>(0,s.jsx)(s.Fragment,{children:Array.from({length:e}).map((e,l)=>(0,s.jsxs)("div",{className:"rounded-lg border bg-card overflow-hidden",children:[(0,s.jsx)("div",{className:"aspect-square w-full bg-muted animate-pulse"}),(0,s.jsxs)("div",{className:"p-4 space-y-3",children:[(0,s.jsx)(a,{className:"h-4 w-3/4"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(a,{className:"h-5 w-1/3"}),(0,s.jsx)(a,{className:"h-3 w-1/4"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(a,{className:"h-3 w-full"}),(0,s.jsx)(a,{className:"h-3 w-full"}),(0,s.jsx)(a,{className:"h-3 w-2/3"})]}),(0,s.jsx)(a,{className:"h-10 w-full"})]})]},l))}),"ProductDetailSkeleton",0,()=>(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(a,{className:"aspect-square w-full rounded-lg"}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2",children:Array.from({length:4}).map((e,l)=>(0,s.jsx)(a,{className:"aspect-square rounded-lg"},l))})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(a,{className:"h-8 w-3/4"}),(0,s.jsx)(a,{className:"h-6 w-1/3"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(a,{className:"h-6 w-16 rounded-full"}),(0,s.jsx)(a,{className:"h-6 w-16 rounded-full"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(a,{className:"h-4 w-full"}),(0,s.jsx)(a,{className:"h-4 w-full"}),(0,s.jsx)(a,{className:"h-4 w-2/3"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(a,{className:"h-4 w-32"}),(0,s.jsx)(a,{className:"h-4 w-40"})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(a,{className:"h-12 flex-1"}),(0,s.jsx)(a,{className:"h-12 w-16"})]}),(0,s.jsx)(a,{className:"h-10 w-full"})]})]}),(0,s.jsxs)("div",{className:"rounded-lg border bg-card p-6",children:[(0,s.jsx)(a,{className:"h-6 w-32 mb-4"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(a,{className:"h-16 w-16 rounded-full"}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)(a,{className:"h-5 w-48"}),(0,s.jsx)(a,{className:"h-4 w-64"})]}),(0,s.jsx)(a,{className:"h-10 w-32"})]})]})]}),"ProfileSkeleton",0,({showAvatar:e=!0,showStats:l=!0})=>(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"rounded-lg border bg-card p-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-6",children:[e&&(0,s.jsx)("div",{children:(0,s.jsx)(a,{className:"h-24 w-24 rounded-full"})}),(0,s.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,s.jsx)(a,{className:"h-8 w-48"}),(0,s.jsx)(a,{className:"h-4 w-64"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(a,{className:"h-4 w-32"}),(0,s.jsx)(a,{className:"h-4 w-32"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(a,{className:"h-10 w-32"}),(0,s.jsx)(a,{className:"h-10 w-32"})]})]})}),l&&(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:Array.from({length:4}).map((e,l)=>(0,s.jsxs)("div",{className:"rounded-lg border bg-card p-6",children:[(0,s.jsx)(a,{className:"h-5 w-24 mb-2"}),(0,s.jsx)(a,{className:"h-8 w-16"})]},l))}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(a,{className:"h-6 w-48"}),(0,s.jsx)("div",{className:"space-y-3",children:Array.from({length:3}).map((e,l)=>(0,s.jsx)("div",{className:"rounded-lg border bg-card p-4",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(a,{className:"h-4 w-3/4"}),(0,s.jsx)(a,{className:"h-3 w-full"}),(0,s.jsx)(a,{className:"h-3 w-2/3"})]})},l))})]})]}),"StatsCardsSkeleton",0,({count:e=4})=>(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:e}).map((e,l)=>(0,s.jsxs)("div",{className:"rounded-lg border bg-card p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)(a,{className:"h-5 w-24"}),(0,s.jsx)(a,{className:"h-4 w-4"})]}),(0,s.jsx)(a,{className:"h-8 w-16"})]},l))}),"TableSkeleton",0,({rows:e=5,columns:l=5,showAvatar:r=!1})=>(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("div",{className:"flex items-center gap-4 px-4 py-3 border-b",children:Array.from({length:l}).map((e,l)=>(0,s.jsx)(a,{className:"h-5 flex-1"},l))}),Array.from({length:e}).map((e,c)=>(0,s.jsxs)("div",{className:"flex items-center gap-4 px-4 py-4 border-b",children:[r&&(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(a,{className:"h-10 w-10 rounded-full"})}),Array.from({length:l}).map((e,l)=>(0,s.jsx)(a,{className:"h-4 flex-1"},l))]},c))]})])},88255,e=>{"use strict";let s=(0,e.i(35884).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>s],88255)},33189,e=>{"use strict";let s=(0,e.i(35884).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>s],33189)},63753,e=>{"use strict";let s=(0,e.i(35884).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>s],63753)},12463,e=>{"use strict";let s=(0,e.i(35884).default)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);e.s(["Heart",()=>s],12463)},35169,e=>{"use strict";let s=(0,e.i(35884).default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);e.s(["Star",()=>s],35169)},37770,e=>{"use strict";var s=e.i(48277),a=e.i(42588),l=e.i(99738),r=e.i(30668),c=e.i(33991);function i({className:e,aspectRatio:a,width:r,height:c}){return(0,s.jsx)("div",{className:(0,l.cn)("animate-pulse bg-muted rounded-lg overflow-hidden",a?({square:"aspect-square",video:"aspect-video",portrait:"aspect-[3/4]",landscape:"aspect-[4/3]"})[a]:"",e),style:{width:r,height:c},"aria-hidden":"true",children:(0,s.jsx)("div",{className:"w-full h-full bg-gradient-to-r from-transparent via-muted-foreground/10 to-transparent animate-[shimmer_1.5s_infinite]"})})}function d({src:e,alt:d,fill:t=!1,width:n,height:m,className:x,priority:o=!1,sizes:h,showFallback:u=!0,fallbackText:j="No Image",showSkeleton:p=!1,blurColor:N=c.BLUR_COLORS.product}){let[f,g]=(0,r.useState)(!0),[v,y]=(0,r.useState)(!1),w=(0,s.jsx)("div",{className:(0,l.cn)("w-full h-full flex items-center justify-center text-muted-foreground text-sm",x),children:j});if(!e||v)return u?w:null;let b=(0,c.generateCloudinaryBlurDataURL)(e)||(0,c.generateColoredBlurDataURL)(N),k={src:e,alt:d,...o&&{priority:o},sizes:h,...t?{fill:!0,className:(0,l.cn)("object-cover transition-opacity duration-500 ease-in-out",f?"opacity-0":"opacity-100",x)}:{width:n,height:m,className:(0,l.cn)("object-cover transition-opacity duration-500 ease-in-out",f?"opacity-0":"opacity-100",x)},onLoad:()=>g(!1),onError:()=>y(!0),placeholder:"blur",blurDataURL:b||c.DEFAULT_BLUR_DATA_URL};return(0,s.jsxs)(s.Fragment,{children:[f&&p&&(0,s.jsx)("div",{className:"absolute inset-0 z-10",children:(0,s.jsx)(i,{className:"w-full h-full"})}),(0,s.jsx)(a.default,{...k})]})}e.s(["default",()=>d],37770)},3333,e=>{"use strict";let s=(0,e.i(35884).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>s],3333)},54133,e=>{"use strict";let s=(0,e.i(35884).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>s],54133)},3893,e=>{"use strict";let s=(0,e.i(35884).default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);e.s(["MessageCircle",()=>s],3893)},22368,e=>{"use strict";let s=(0,e.i(35884).default)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);e.s(["Minus",()=>s],22368)},34594,e=>{"use strict";var s=e.i(48277),a=e.i(30668),l=e.i(96086),r=e.i(37770),c=e.i(16506),i=e.i(33189),d=e.i(12463),t=e.i(88255),n=e.i(63753),m=e.i(54133),x=e.i(3893),o=e.i(50097),h=e.i(35169);let u=(0,e.i(35884).default)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var j=e.i(3333),p=e.i(22368),N=e.i(91482),f=e.i(99738),g=e.i(40206),v=e.i(47281),y=e.i(80658);e.i(92544);var w=e.i(11897),b=e.i(36291);function k(){let e=(0,l.useParams)(),k=(0,l.useRouter)(),{user:A,isAuthenticated:C}=(0,g.useAuth)(),{addToCart:S}=(0,v.useCart)(),[P,M]=(0,a.useState)(null),[L,z]=(0,a.useState)([]),[_,R]=(0,a.useState)(!0),[F,U]=(0,a.useState)(0),[q,D]=(0,a.useState)(!1),[B,$]=(0,a.useState)(1),[T,H]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{try{let s=await N.productsAPI.getProduct(e.id);M(s.data.product),D(s.data.product.likes?.includes(A?._id||"")||!1);let a=await N.productsAPI.getRelatedProducts(e.id);z(a.data.products)}catch(e){console.error("Failed to fetch product:",e),k.push("/products")}finally{R(!1)}})()},[e.id,A]);let I=async()=>{if(!C)return void k.push("/login");try{let e=await N.productsAPI.toggleLike(P._id);D(e.data.liked)}catch(e){console.error("Failed to like product:",e)}},O=async()=>{if(!C)return void k.push("/login");H(!0);try{await S(P._id),w.toast.success(`Added ${B} item(s) to cart!`)}catch(e){console.error("Failed to add to cart:",e),w.toast.error(e.response?.data?.message||"Failed to add to cart")}finally{H(!1)}};return _?(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsx)(b.ProductDetailSkeleton,{})}):P?(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)(c.default,{href:"/products",className:"inline-flex items-center space-x-2 text-muted-foreground hover:text-foreground mb-6",children:[(0,s.jsx)(i.ArrowLeft,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Back to Products"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-16",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"relative aspect-square bg-muted rounded-lg overflow-hidden",children:(0,s.jsx)(r.default,{src:P.images?.[F],alt:P.title,fill:!0,priority:!0,sizes:"(max-width: 1024px) 100vw, 50vw"})}),P.images&&P.images.length>1&&(0,s.jsx)("div",{className:"flex space-x-2 overflow-x-auto",children:P.images.map((e,a)=>(0,s.jsx)("button",{onClick:()=>U(a),className:(0,f.cn)("relative w-20 h-20 rounded-lg overflow-hidden border-2 flex-shrink-0",F===a?"border-primary":"border-transparent"),children:(0,s.jsx)(r.default,{src:e,alt:`${P.title} ${a+1}`,fill:!0,sizes:"80px"})},a))})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-2",children:P.title}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("span",{className:"text-3xl font-bold text-primary",children:(0,f.formatPrice)(P.price)}),P.isNegotiable&&(0,s.jsx)("span",{className:"px-3 py-1 rounded-full bg-primary/10 text-primary text-sm",children:"Negotiable"})]})]}),P.seller&&(0,s.jsxs)(c.default,{href:`/users/${P.seller._id}`,className:"flex items-center space-x-3 p-4 rounded-lg border bg-card hover:bg-accent transition-colors",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center text-primary font-semibold",children:P.seller.name?.charAt(0)||"U"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-semibold",children:P.seller.name||"Unknown Seller"}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center space-x-2",children:[(0,s.jsx)(h.Star,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),(0,s.jsx)("span",{children:P.seller.averageRating||"New"}),(P.seller.totalReviews||0)>0&&(0,s.jsxs)("span",{children:["(",P.seller.totalReviews||0," reviews)"]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-6 text-sm text-muted-foreground",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(n.Eye,{className:"h-4 w-4"}),(0,s.jsxs)("span",{children:[P.views," views"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(d.Heart,{className:"h-4 w-4"}),(0,s.jsxs)("span",{children:[P.likes?.length||0," likes"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(m.Calendar,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:(0,f.formatDate)(P.createdAt)})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"font-semibold mb-2",children:"Description"}),(0,s.jsx)("p",{className:"text-muted-foreground whitespace-pre-line",children:P.description})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("span",{className:"px-3 py-1 rounded-full bg-secondary text-secondary-foreground text-sm",children:P.category.name}),(0,s.jsx)("span",{className:"px-3 py-1 rounded-full bg-secondary text-secondary-foreground text-sm capitalize",children:P.condition.replace("-"," ")})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[(0,s.jsx)(t.MapPin,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:P.location})]}),(0,s.jsxs)("div",{className:"space-y-4 pt-4 border-t",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Quantity"}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("button",{onClick:()=>$(Math.max(1,B-1)),className:"p-2 rounded-lg border hover:bg-accent transition-colors",disabled:B<=1,children:(0,s.jsx)(p.Minus,{className:"h-4 w-4"})}),(0,s.jsx)("span",{className:"w-16 text-center font-medium text-lg",children:B}),(0,s.jsx)("button",{onClick:()=>$(B+1),className:"p-2 rounded-lg border hover:bg-accent transition-colors",children:(0,s.jsx)(j.Plus,{className:"h-4 w-4"})})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)(y.default,{onClick:()=>{C?k.push(`/buyer/checkout?productId=${P?._id}&quantity=${B}`):k.push("/login")},className:"flex-1",size:"lg",children:[(0,s.jsx)(o.ShoppingCart,{className:"h-5 w-5 mr-2"}),"Buy Now"]}),(0,s.jsx)(y.default,{onClick:O,variant:"outline",className:"flex-1",size:"lg",disabled:T,children:T?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"animate-spin mr-2",children:"â³"}),"Adding..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.ShoppingCart,{className:"h-5 w-5 mr-2"}),"Add to Cart"]})}),(0,s.jsx)(y.default,{onClick:I,variant:q?"primary":"outline",size:"lg",className:(0,f.cn)(q&&"bg-destructive hover:bg-destructive/90"),children:(0,s.jsx)(d.Heart,{className:(0,f.cn)("h-5 w-5",q&&"fill-current")})}),(0,s.jsx)(y.default,{onClick:()=>{C?P?.seller?._id?k.push(`/messages?userId=${P.seller._id}&productId=${P._id}`):w.toast.error("Seller information not available"):k.push("/login")},variant:"outline",size:"lg",disabled:!P?.seller?._id,children:(0,s.jsx)(x.MessageCircle,{className:"h-5 w-5"})}),(0,s.jsx)(y.default,{variant:"outline",size:"lg",children:(0,s.jsx)(u,{className:"h-5 w-5"})})]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Total: ",(0,s.jsx)("span",{className:"font-semibold text-foreground",children:(0,f.formatPrice)((P?.price||0)*B)})]})]})]})]}),L.length>0&&(0,s.jsxs)("section",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Related Products"}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:L.map(e=>(0,s.jsx)(ProductCard,{product:e},e._id))})]})]}):null}e.s(["default",()=>k],34594)}]);