(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,96086,(t,e,r)=>{e.exports=t.r(9187)},80380,t=>{"use strict";let e=(0,t.i(35884).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);t.s(["Loader2",()=>e],80380)},67494,t=>{"use strict";let e=(0,t.i(35884).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);t.s(["User",()=>e],67494)},42350,t=>{"use strict";let e=(0,t.i(35884).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);t.s(["AlertCircle",()=>e],42350)},42414,t=>{"use strict";let e=(0,t.i(35884).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);t.s(["RefreshCw",()=>e],42414)},46669,t=>{"use strict";t.i(39057);var e=t.i(48277),r=t.i(42350);let i=(0,t.i(35884).default)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]);var s=t.i(42414);function a({error:t,resetError:a}){return(0,e.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background px-4",children:(0,e.jsxs)("div",{className:"max-w-md w-full space-y-6",children:[(0,e.jsx)("div",{className:"flex justify-center",children:(0,e.jsx)("div",{className:"p-4 rounded-full bg-destructive/10",children:(0,e.jsx)(r.AlertCircle,{className:"h-16 w-16 text-destructive"})})}),(0,e.jsxs)("div",{className:"text-center space-y-2",children:[(0,e.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"Oops! Something went wrong"}),(0,e.jsx)("p",{className:"text-muted-foreground",children:"We encountered an unexpected error. Don't worry, your data is safe. You can try again or go back to the home page."})]}),!1,(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,e.jsxs)("button",{onClick:()=>{window.location.reload()},className:"flex-1 inline-flex items-center justify-center space-x-2 px-4 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors font-medium",children:[(0,e.jsx)(s.RefreshCw,{className:"h-4 w-4"}),(0,e.jsx)("span",{children:"Try Again"})]}),(0,e.jsxs)("button",{onClick:()=>{window.location.href="/"},className:"flex-1 inline-flex items-center justify-center space-x-2 px-4 py-3 bg-secondary text-secondary-foreground rounded-lg hover:bg-secondary/80 transition-colors font-medium",children:[(0,e.jsx)(i,{className:"h-4 w-4"}),(0,e.jsx)("span",{children:"Go Home"})]})]}),(0,e.jsxs)("p",{className:"text-center text-sm text-muted-foreground",children:["If this problem persists, please"," ",(0,e.jsx)("a",{href:"/contact",className:"text-primary hover:underline",children:"contact support"})]})]})})}t.s(["ErrorFallback",()=>a],46669)},49449,t=>{"use strict";let e=(0,t.i(35884).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);t.s(["Trash2",()=>e],49449)},93561,t=>{"use strict";let e=(0,t.i(35884).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);t.s(["CheckCircle",()=>e],93561)},87635,t=>{"use strict";let e=(0,t.i(35884).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);t.s(["X",()=>e],87635)},32890,t=>{"use strict";let e=(0,t.i(35884).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);t.s(["Search",()=>e],32890)},50097,t=>{"use strict";let e=(0,t.i(35884).default)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);t.s(["ShoppingCart",()=>e],50097)},33991,t=>{"use strict";var e=t.i(78113);function r(t){if(t&&t.includes("cloudinary.com"))try{return t.replace(/\/upload\//,"/upload/q_1,bl_50,w_10,h_10,c_scale/")}catch(t){console.error("Error generating Cloudinary blur URL:",t);return}}function i(t="#e5e7eb",r=10,s=10){let a=`
    <svg width="${r}" height="${s}" xmlns="http://www.w3.org/2000/svg">
      <rect width="100%" height="100%" fill="${t}"/>
    </svg>
  `.trim(),n=e.Buffer.from(a).toString("base64");return`data:image/svg+xml;base64,${n}`}let s=function(t=10,r=10){let i=`
    <svg width="${t}" height="${r}" xmlns="http://www.w3.org/2000/svg">
      <rect width="100%" height="100%" fill="#e5e7eb"/>
    </svg>
  `.trim(),s=e.Buffer.from(i).toString("base64");return`data:image/svg+xml;base64,${s}`}();t.s(["BLUR_COLORS",0,{product:"#f3f4f6",avatar:"#e5e7eb",banner:"#d1d5db",default:"#e5e7eb"},"DEFAULT_BLUR_DATA_URL",0,s,"IMAGE_SIZES",0,{avatar:"(max-width: 640px) 32px, (max-width: 1024px) 40px, 48px",thumbnail:"(max-width: 640px) 80px, 100px",productCard:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw",productDetail:"(max-width: 1024px) 100vw, 50vw",hero:"100vw",banner:"(max-width: 640px) 100vw, (max-width: 1024px) 90vw, 1200px"},"generateCloudinaryBlurDataURL",()=>r,"generateColoredBlurDataURL",()=>i])},47281,t=>{"use strict";var e=t.i(48277),r=t.i(30668),i=t.i(28015);t.i(92544);var s=t.i(11897),a=t.i(40206);let n=(0,r.createContext)(void 0),o="campus_market_cart",c=()=>{try{let t=localStorage.getItem(o);if(!t)return[];let e=JSON.parse(t);if(Date.now()-e.timestamp>6048e5||!Array.isArray(e.items))return localStorage.removeItem(o),[];return e.items.filter(t=>t&&"object"==typeof t&&t.product&&"object"==typeof t.product&&"number"==typeof t.quantity&&t.quantity>0)}catch(t){return console.error("Error reading cart from localStorage:",t),localStorage.removeItem(o),[]}},l=t=>{try{let e={items:t,timestamp:Date.now()};localStorage.setItem(o,JSON.stringify(e))}catch(t){console.error("Error saving cart to localStorage:",t)}},u=()=>{localStorage.removeItem(o)},h=(t,e)=>{let r=new Map;return e.forEach(t=>{let e=t.product?._id;e&&r.set(e,t)}),t.forEach(t=>{let e=t.product?._id;if(e){let i=r.get(e);i?i.quantity!==t.quantity&&r.set(e,{...i,quantity:t.quantity}):r.set(e,t)}}),Array.from(r.values())};function d({children:t}){let{isAuthenticated:d}=(0,a.useAuth)(),[f,p]=(0,r.useState)([]),[y,m]=(0,r.useState)(!1),v=(0,r.useMemo)(()=>f.reduce((t,e)=>t+e.quantity,0),[f]),b=(0,r.useMemo)(()=>f.reduce((t,e)=>t+(e.product?.price||0)*e.quantity,0),[f]),g=(0,r.useCallback)(async(t,e)=>{if(d&&0!==t.length)try{for(let r of(e.map(t=>t.product?._id),t)){let t=r.product?._id;if(!t)continue;let s=e.find(e=>e.product?._id===t);if(s){if(s.quantity!==r.quantity)try{await i.cartAPI.updateItemQuantity(t,r.quantity)}catch(e){console.error(`Failed to update quantity for item ${t}:`,e)}}else try{await i.cartAPI.addItem({productId:t,quantity:r.quantity})}catch(e){console.error(`Failed to sync item ${t} to server:`,e)}}}catch(t){console.error("Error syncing local cart to server:",t)}},[d]),w=(0,r.useCallback)(async()=>{if(!d)return void p(c());m(!0);try{let t=(await i.cartAPI.getCart()).data.data.items||[],e=c(),r=h(e,t);p(r),l(r),e.length>0&&await g(e,t)}catch(t){s.toast.error("Failed to fetch cart items"),p(c())}finally{m(!1)}},[d,g]),x=(0,r.useCallback)(async(t,e=1)=>{m(!0);try{let r;if(d)r=(await i.cartAPI.addItem({productId:t,quantity:e})).data.data.items||[];else{let i=f.findIndex(e=>e.product?._id===t);if(i>=0)r=f.map((t,r)=>r===i?{...t,quantity:t.quantity+e}:t);else throw Error("Product details not available. Please try again.");s.toast.success("Item added to cart")}p(r),l(r)}catch(t){throw s.toast.error("Failed to add item to cart"),t}finally{m(!1)}},[d,f]),C=(0,r.useCallback)(async t=>{m(!0);try{let e;d?e=(await i.cartAPI.removeItem(t)).data.data.items||[]:(e=f.filter(e=>e.product?._id!==t),s.toast.success("Item removed from cart")),p(e),l(e)}catch(t){throw s.toast.error("Failed to remove item from cart"),t}finally{m(!1)}},[d,f]),S=(0,r.useCallback)(async(t,e)=>{if(e<1)throw Error("Quantity must be at least 1");m(!0);try{let r;r=d?(await i.cartAPI.updateItemQuantity(t,e)).data.data.items||[]:f.map(r=>r.product?._id===t?{...r,quantity:e}:r),p(r),l(r)}catch(t){throw s.toast.error("Failed to update quantity"),t}finally{m(!1)}},[d,f]),k=(0,r.useCallback)(async()=>{m(!0);try{if(d){let t=await i.cartAPI.clearCart();p(t.data.data.items||[])}else p([]);u(),s.toast.success("Cart cleared")}catch(t){throw s.toast.error("Failed to clear cart"),t}finally{m(!1)}},[d]),j=(0,r.useCallback)(async()=>{if(!d)return;let t=c();if(0===t.length)return void await w();m(!0);try{let e=(await i.cartAPI.getCart()).data.data.items||[],r=h(t,e);p(r),l(r),await g(t,e);let a=await i.cartAPI.getCart();p(a.data.data.items||[]),l(a.data.data.items||[]),s.toast.success("Cart merged successfully")}catch(t){console.error("Error merging cart with server:",t),await w()}finally{m(!1)}},[d,w,g]),T=(0,r.useCallback)(()=>{u(),p([])},[]);return(0,r.useEffect)(()=>{let t=c();t.length>0&&p(t)},[]),(0,r.useEffect)(()=>{if(d)j();else{p([]);let t=c();t.length>0&&p(t)}},[d,j]),(0,r.useEffect)(()=>{let t=t=>{if(t.key===o){let e=t.newValue;if(e)try{let t=JSON.parse(e);if(!(Date.now()-t.timestamp>6048e5)&&Array.isArray(t.items)){let e=t.items.filter(t=>t&&"object"==typeof t&&t.product&&"object"==typeof t.product&&"number"==typeof t.quantity&&t.quantity>0);p(e)}else p([])}catch(t){console.error("Error parsing cart from storage event:",t)}else p([])}};return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}},[]),(0,r.useEffect)(()=>{let t=setInterval(()=>{let t=c();t.length>0&&l(t)},36e5);return()=>{clearInterval(t)}},[]),(0,e.jsx)(n.Provider,{value:{cart:f,cartCount:v,cartTotal:b,loading:y,fetchCart:w,addToCart:x,removeFromCart:C,updateQuantity:S,clearCart:k,mergeCartWithServer:j,clearLocalCart:T},children:t})}function f(){let t=(0,r.useContext)(n);return void 0===t?(s.toast.warning("Cart not initialized properly"),{cart:[],cartCount:0,cartTotal:0,loading:!1,fetchCart:async()=>{},addToCart:async()=>{throw Error("CartProvider not found")},removeFromCart:async()=>{throw Error("CartProvider not found")},updateQuantity:async()=>{throw Error("CartProvider not found")},clearCart:async()=>{throw Error("CartProvider not found")},mergeCartWithServer:async()=>{},clearLocalCart:()=>{}}):t}t.s(["CartProvider",()=>d,"useCart",()=>f])},47022,t=>{"use strict";let e=(0,t.i(35884).default)("check-check",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);t.s(["CheckCheck",()=>e],47022)},94576,t=>{"use strict";let e=(0,t.i(35884).default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);t.s(["Bell",()=>e],94576)},68160,36441,t=>{"use strict";t.i(39057);var e={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},r=new class{#t=e;#e=!1;setTimeoutProvider(t){this.#t=t}setTimeout(t,e){return this.#t.setTimeout(t,e)}clearTimeout(t){this.#t.clearTimeout(t)}setInterval(t,e){return this.#t.setInterval(t,e)}clearInterval(t){this.#t.clearInterval(t)}};function i(t){setTimeout(t,0)}t.s(["systemSetTimeoutZero",()=>i,"timeoutManager",()=>r],36441);var s="u"<typeof window||"Deno"in globalThis;function a(){}function n(t,e){return"function"==typeof t?t(e):t}function o(t){return"number"==typeof t&&t>=0&&t!==1/0}function c(t,e){return Math.max(t+(e||0)-Date.now(),0)}function l(t,e){return"function"==typeof t?t(e):t}function u(t,e){return"function"==typeof t?t(e):t}function h(t,e){let{type:r="all",exact:i,fetchStatus:s,predicate:a,queryKey:n,stale:o}=t;if(n){if(i){if(e.queryHash!==f(n,e.options))return!1}else if(!y(e.queryKey,n))return!1}if("all"!==r){let t=e.isActive();if("active"===r&&!t||"inactive"===r&&t)return!1}return("boolean"!=typeof o||e.isStale()===o)&&(!s||s===e.state.fetchStatus)&&(!a||!!a(e))}function d(t,e){let{exact:r,status:i,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(r){if(p(e.options.mutationKey)!==p(a))return!1}else if(!y(e.options.mutationKey,a))return!1}return(!i||e.state.status===i)&&(!s||!!s(e))}function f(t,e){return(e?.queryKeyHashFn||p)(t)}function p(t){return JSON.stringify(t,(t,e)=>g(e)?Object.keys(e).sort().reduce((t,r)=>(t[r]=e[r],t),{}):e)}function y(t,e){return t===e||typeof t==typeof e&&!!t&&!!e&&"object"==typeof t&&"object"==typeof e&&Object.keys(e).every(r=>y(t[r],e[r]))}var m=Object.prototype.hasOwnProperty;function v(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(let r in t)if(t[r]!==e[r])return!1;return!0}function b(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function g(t){if(!w(t))return!1;let e=t.constructor;if(void 0===e)return!0;let r=e.prototype;return!!w(r)&&!!r.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(t)===Object.prototype}function w(t){return"[object Object]"===Object.prototype.toString.call(t)}function x(t){return new Promise(e=>{r.setTimeout(e,t)})}function C(t,e,r){return"function"==typeof r.structuralSharing?r.structuralSharing(t,e):!1!==r.structuralSharing?function t(e,r,i=0){if(e===r)return e;if(i>500)return r;let s=b(e)&&b(r);if(!s&&!(g(e)&&g(r)))return r;let a=(s?e:Object.keys(e)).length,n=s?r:Object.keys(r),o=n.length,c=s?Array(o):{},l=0;for(let u=0;u<o;u++){let o=s?u:n[u],h=e[o],d=r[o];if(h===d){c[o]=h,(s?u<a:m.call(e,o))&&l++;continue}if(null===h||null===d||"object"!=typeof h||"object"!=typeof d){c[o]=d;continue}let f=t(h,d,i+1);c[o]=f,f===h&&l++}return a===o&&l===a?e:c}(t,e):e}function S(t,e,r=0){let i=[...t,e];return r&&i.length>r?i.slice(1):i}function k(t,e,r=0){let i=[e,...t];return r&&i.length>r?i.slice(0,-1):i}var j=Symbol();function T(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:t.queryFn&&t.queryFn!==j?t.queryFn:()=>Promise.reject(Error(`Missing queryFn: '${t.queryHash}'`))}function E(t,e){return"function"==typeof t?t(...e):!!t}function O(t,e,r){let i,s=!1;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(i??=e(),s||(s=!0,i.aborted?r():i.addEventListener("abort",r,{once:!0})),i)}),t}t.s(["addConsumeAwareSignal",()=>O,"addToEnd",()=>S,"addToStart",()=>k,"ensureQueryFn",()=>T,"functionalUpdate",()=>n,"hashKey",()=>p,"hashQueryKeyByOptions",()=>f,"isServer",()=>s,"isValidTimeout",()=>o,"matchMutation",()=>d,"matchQuery",()=>h,"noop",()=>a,"partialMatchKey",()=>y,"replaceData",()=>C,"resolveEnabled",()=>u,"resolveStaleTime",()=>l,"shallowEqualObjects",()=>v,"shouldThrowError",()=>E,"skipToken",()=>j,"sleep",()=>x,"timeUntilStale",()=>c],68160)},47206,t=>{"use strict";let e,r,i,s,a,n;var o=t.i(36441).systemSetTimeoutZero,c=(e=[],r=0,i=t=>{t()},s=t=>{t()},a=o,{batch:t=>{let n;r++;try{n=t()}finally{let t;--r||(t=e,e=[],t.length&&a(()=>{s(()=>{t.forEach(t=>{i(t)})})}))}return n},batchCalls:t=>(...e)=>{n(()=>{t(...e)})},schedule:n=t=>{r?e.push(t):a(()=>{i(t)})},setNotifyFunction:t=>{i=t},setBatchNotifyFunction:t=>{s=t},setScheduler:t=>{a=t}});t.s(["notifyManager",()=>c])},10488,t=>{"use strict";var e=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}};t.s(["Subscribable",()=>e])},66849,t=>{"use strict";var e=t.i(10488),r=t.i(68160),i=new class extends e.Subscribable{#r;#i;#s;constructor(){super(),this.#s=t=>{if(!r.isServer&&window.addEventListener){let e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#i||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#i?.(),this.#i=void 0)}setEventListener(t){this.#s=t,this.#i?.(),this.#i=t(t=>{"boolean"==typeof t?this.setFocused(t):this.onFocus()})}setFocused(t){this.#r!==t&&(this.#r=t,this.onFocus())}onFocus(){let t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return"boolean"==typeof this.#r?this.#r:globalThis.document?.visibilityState!=="hidden"}};t.s(["focusManager",()=>i])},28997,40285,11043,37146,30979,46592,t=>{"use strict";t.i(39057);var e=t.i(68160),r=t.i(47206),i=t.i(66849),s=t.i(10488),a=new class extends s.Subscribable{#a=!0;#i;#s;constructor(){super(),this.#s=t=>{if(!e.isServer&&window.addEventListener){let e=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#i||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#i?.(),this.#i=void 0)}setEventListener(t){this.#s=t,this.#i?.(),this.#i=t(this.setOnline.bind(this))}setOnline(t){this.#a!==t&&(this.#a=t,this.listeners.forEach(e=>{e(t)}))}isOnline(){return this.#a}};function n(){let t,e,r=new Promise((r,i)=>{t=r,e=i});function i(t){Object.assign(r,t),delete r.resolve,delete r.reject}return r.status="pending",r.catch(()=>{}),r.resolve=e=>{i({status:"fulfilled",value:e}),t(e)},r.reject=t=>{i({status:"rejected",reason:t}),e(t)},r}function o(t){return Math.min(1e3*2**t,3e4)}function c(t){return(t??"online")!=="online"||a.isOnline()}t.s(["onlineManager",()=>a],40285),t.s(["pendingThenable",()=>n],11043);var l=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function u(t){let r,s=!1,u=0,h=n(),d=()=>i.focusManager.isFocused()&&("always"===t.networkMode||a.isOnline())&&t.canRun(),f=()=>c(t.networkMode)&&t.canRun(),p=t=>{"pending"===h.status&&(r?.(),h.resolve(t))},y=t=>{"pending"===h.status&&(r?.(),h.reject(t))},m=()=>new Promise(e=>{r=t=>{("pending"!==h.status||d())&&e(t)},t.onPause?.()}).then(()=>{r=void 0,"pending"===h.status&&t.onContinue?.()}),v=()=>{let r;if("pending"!==h.status)return;let i=0===u?t.initialPromise:void 0;try{r=i??t.fn()}catch(t){r=Promise.reject(t)}Promise.resolve(r).then(p).catch(r=>{if("pending"!==h.status)return;let i=t.retry??3*!e.isServer,a=t.retryDelay??o,n="function"==typeof a?a(u,r):a,c=!0===i||"number"==typeof i&&u<i||"function"==typeof i&&i(u,r);s||!c?y(r):(u++,t.onFail?.(u,r),(0,e.sleep)(n).then(()=>d()?void 0:m()).then(()=>{s?y(r):v()}))})};return{promise:h,status:()=>h.status,cancel:e=>{if("pending"===h.status){let r=new l(e);y(r),t.onCancel?.(r)}},continue:()=>(r?.(),h),cancelRetry:()=>{s=!0},continueRetry:()=>{s=!1},canStart:f,start:()=>(f()?v():m().then(v),h)}}t.s(["CancelledError",()=>l,"canFetch",()=>c,"createRetryer",()=>u],37146);var h=t.i(36441),d=class{#n;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),(0,e.isValidTimeout)(this.gcTime)&&(this.#n=h.timeoutManager.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(e.isServer?1/0:3e5))}clearGcTimeout(){this.#n&&(h.timeoutManager.clearTimeout(this.#n),this.#n=void 0)}};t.s(["Removable",()=>d],30979);var f=class extends d{#o;#c;#l;#u;#h;#d;#f;constructor(t){super(),this.#f=!1,this.#d=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#u=t.client,this.#l=this.#u.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#o=m(this.options),this.state=t.state??this.#o,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#h?.promise}setOptions(t){if(this.options={...this.#d,...t},this.updateGcTime(this.options.gcTime),this.state&&void 0===this.state.data){let t=m(this.options);void 0!==t.data&&(this.setState(y(t.data,t.dataUpdatedAt)),this.#o=t)}}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#l.remove(this)}setData(t,r){let i=(0,e.replaceData)(this.state.data,t,this.options);return this.#p({data:i,type:"success",dataUpdatedAt:r?.updatedAt,manual:r?.manual}),i}setState(t,e){this.#p({type:"setState",state:t,setStateOptions:e})}cancel(t){let r=this.#h?.promise;return this.#h?.cancel(t),r?r.then(e.noop).catch(e.noop):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#o)}isActive(){return this.observers.some(t=>!1!==(0,e.resolveEnabled)(t.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===e.skipToken||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(t=>"static"===(0,e.resolveStaleTime)(t.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(t=0){return void 0===this.state.data||"static"!==t&&(!!this.state.isInvalidated||!(0,e.timeUntilStale)(this.state.dataUpdatedAt,t))}onFocus(){let t=this.observers.find(t=>t.shouldFetchOnWindowFocus());t?.refetch({cancelRefetch:!1}),this.#h?.continue()}onOnline(){let t=this.observers.find(t=>t.shouldFetchOnReconnect());t?.refetch({cancelRefetch:!1}),this.#h?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#l.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#h&&(this.#f?this.#h.cancel({revert:!0}):this.#h.cancelRetry()),this.scheduleGc()),this.#l.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#p({type:"invalidate"})}async fetch(t,r){let i;if("idle"!==this.state.fetchStatus&&this.#h?.status()!=="rejected"){if(void 0!==this.state.data&&r?.cancelRefetch)this.cancel({silent:!0});else if(this.#h)return this.#h.continueRetry(),this.#h.promise}if(t&&this.setOptions(t),!this.options.queryFn){let t=this.observers.find(t=>t.options.queryFn);t&&this.setOptions(t.options)}let s=new AbortController,a=t=>{Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(this.#f=!0,s.signal)})},n=()=>{let t,i=(0,e.ensureQueryFn)(this.options,r),s=(a(t={client:this.#u,queryKey:this.queryKey,meta:this.meta}),t);return(this.#f=!1,this.options.persister)?this.options.persister(i,s,this):i(s)},o=(a(i={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:this.#u,state:this.state,fetchFn:n}),i);this.options.behavior?.onFetch(o,this),this.#c=this.state,("idle"===this.state.fetchStatus||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#p({type:"fetch",meta:o.fetchOptions?.meta}),this.#h=u({initialPromise:r?.initialPromise,fn:o.fetchFn,onCancel:t=>{t instanceof l&&t.revert&&this.setState({...this.#c,fetchStatus:"idle"}),s.abort()},onFail:(t,e)=>{this.#p({type:"failed",failureCount:t,error:e})},onPause:()=>{this.#p({type:"pause"})},onContinue:()=>{this.#p({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{let t=await this.#h.start();if(void 0===t)throw Error(`${this.queryHash} data is undefined`);return this.setData(t),this.#l.config.onSuccess?.(t,this),this.#l.config.onSettled?.(t,this.state.error,this),t}catch(t){if(t instanceof l){if(t.silent)return this.#h.promise;else if(t.revert){if(void 0===this.state.data)throw t;return this.state.data}}throw this.#p({type:"error",error:t}),this.#l.config.onError?.(t,this),this.#l.config.onSettled?.(this.state.data,t,this),t}finally{this.scheduleGc()}}#p(t){let e=e=>{switch(t.type){case"failed":return{...e,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...e,fetchStatus:"paused"};case"continue":return{...e,fetchStatus:"fetching"};case"fetch":return{...e,...p(e.data,this.options),fetchMeta:t.meta??null};case"success":let r={...e,...y(t.data,t.dataUpdatedAt),dataUpdateCount:e.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#c=t.manual?r:void 0,r;case"error":let i=t.error;return{...e,error:i,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...e,isInvalidated:!0};case"setState":return{...e,...t.state}}};this.state=e(this.state),r.notifyManager.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate()}),this.#l.notify({query:this,type:"updated",action:t})})}};function p(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:c(e.networkMode)?"fetching":"paused",...void 0===t&&{error:null,status:"pending"}}}function y(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function m(t){let e="function"==typeof t.initialData?t.initialData():t.initialData,r=void 0!==e,i=r?"function"==typeof t.initialDataUpdatedAt?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}t.s(["Query",()=>f,"fetchState",()=>p],28997);var v=t.i(30668),b=t.i(48277),g=v.createContext(void 0),w=t=>{let e=v.useContext(g);if(t)return t;if(!e)throw Error("No QueryClient set, use QueryClientProvider to set one");return e},x=({client:t,children:e})=>(v.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),(0,b.jsx)(g.Provider,{value:t,children:e}));t.s(["QueryClientProvider",()=>x,"useQueryClient",()=>w],46592)}]);