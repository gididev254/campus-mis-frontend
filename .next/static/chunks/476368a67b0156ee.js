(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,80658,e=>{"use strict";var s=e.i(48277),t=e.i(99738);function r({children:e,className:r,variant:a="primary",size:l="md",isLoading:i=!1,loadingText:d,disabled:c,...o}){return(0,s.jsx)("button",{type:o.type||"button",className:(0,t.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-ring disabled:opacity-50 disabled:pointer-events-none disabled:cursor-not-allowed",{primary:"bg-primary text-primary-foreground hover:opacity-90 focus-visible:ring-primary",secondary:"bg-secondary text-secondary-foreground hover:opacity-90 focus-visible:ring-secondary",outline:"border border-border hover:bg-accent hover:text-accent-foreground focus-visible:ring-border",ghost:"hover:bg-accent hover:text-accent-foreground focus-visible:ring-accent",danger:"bg-destructive text-destructive-foreground hover:opacity-90 focus-visible:ring-destructive"}[a],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[l],r),disabled:c||i,"aria-live":i?"polite":void 0,"aria-busy":i,...o,children:i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",role:"img",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,s.jsx)("span",{children:d||"Loading..."})]}):e})}e.s(["default",()=>r])},35384,e=>{"use strict";var s=e.i(48277),t=e.i(30668),r=e.i(46669);class a extends t.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){console.error("ClientErrorBoundary caught an error:",e,s)}resetError=()=>{this.setState({hasError:!1,error:null})};render(){if(this.state.hasError){let e=this.props.fallback||r.ErrorFallback;return(0,s.jsx)(e,{error:this.state.error,resetError:this.resetError})}return this.props.children}}e.s(["ClientErrorBoundary",()=>a])},59484,e=>{"use strict";let s=(0,e.i(35884).default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);e.s(["Package",()=>s],59484)},54133,e=>{"use strict";let s=(0,e.i(35884).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>s],54133)},87200,e=>{"use strict";let s=(0,e.i(35884).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>s],87200)},47038,e=>{"use strict";var s=e.i(48277),t=e.i(30668),r=e.i(96086),a=e.i(16506),l=e.i(42588),i=e.i(59484),d=e.i(54133),c=e.i(87200),o=e.i(35884);let n=(0,o.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),u=(0,o.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var x=e.i(91482),m=e.i(40206),h=e.i(99738),p=e.i(80658);e.i(92544);var g=e.i(11897),f=e.i(35384);function v(){return(0,s.jsx)(f.ClientErrorBoundary,{children:(0,s.jsx)(j,{})})}function j(){let e=(0,r.useRouter)(),{isAuthenticated:o,user:f}=(0,m.useAuth)(),[v,j]=(0,t.useState)([]),[y,b]=(0,t.useState)(!0),[N,w]=(0,t.useState)(null),[k,P]=(0,t.useState)("updatedAt"),[S,A]=(0,t.useState)("desc"),[C,E]=(0,t.useState)({totalSold:0,totalRevenue:0,avgPrice:0});(0,t.useEffect)(()=>{o?f?.role!=="seller"&&f?.role!=="admin"?e.push("/products"):L():e.push("/login")},[o,f,k,S]);let L=async()=>{try{let e=await x.productsAPI.getSoldProducts({sortBy:k,sortOrder:S});j(e.data.data||[]);let s=e.data.data||[],t=s.reduce((e,s)=>e+(s.price||0),0),r=s.length>0?t/s.length:0;E({totalSold:s.length,totalRevenue:t,avgPrice:r})}catch(e){console.error("Failed to fetch sold products:",e),g.toast.error("Failed to load sold products.")}finally{b(!1)}},M=async s=>{if(confirm("Re-list this product? This will create a new active listing with the same details.")){w(s);try{await x.productsAPI.relistProduct(s,{}),g.toast.success("Product re-listed successfully!"),e.push("/seller/products")}catch(e){console.error("Failed to re-list product:",e),g.toast.error("Failed to re-list product."),g.toast.error(e.response?.data?.message||"Failed to re-list product"),g.toast.error(e.response?.data?.message||"Failed to re-list product")}finally{w(null)}}};return y?(0,s.jsx)("div",{className:"container mx-auto px-4 py-16",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Loading sold products..."})]})}):(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(i.Package,{className:"h-8 w-8 text-green-600"}),(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Sold Products History"})]}),(0,s.jsx)(a.default,{href:"/seller/products",children:(0,s.jsx)(p.default,{variant:"outline",children:"View Active Listings"})})]}),(0,s.jsx)("p",{className:"text-muted-foreground mt-2",children:"Track your completed sales and revenue"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,s.jsx)("div",{className:"rounded-lg border bg-card p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Sold"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-green-600",children:C.totalSold})]}),(0,s.jsx)(i.Package,{className:"h-12 w-12 text-green-600 opacity-20"})]})}),(0,s.jsx)("div",{className:"rounded-lg border bg-card p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Revenue"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-primary",children:(0,h.formatPrice)(C.totalRevenue)})]}),(0,s.jsx)(c.TrendingUp,{className:"h-12 w-12 text-primary opacity-20"})]})}),(0,s.jsx)("div",{className:"rounded-lg border bg-card p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Average Price"}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:(0,h.formatPrice)(C.avgPrice)})]}),(0,s.jsx)(d.Calendar,{className:"h-12 w-12 text-muted opacity-20"})]})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,s.jsx)(n,{className:"h-5 w-5 text-muted-foreground"}),(0,s.jsxs)("select",{value:`${k}-${S}`,onChange:e=>{let[s,t]=e.target.value.split("-");P(s),A(t)},className:"px-4 py-2 rounded-lg border bg-background",children:[(0,s.jsx)("option",{value:"updatedAt-desc",children:"Recently Sold"}),(0,s.jsx)("option",{value:"updatedAt-asc",children:"Oldest Sales"}),(0,s.jsx)("option",{value:"price-desc",children:"Highest Price"}),(0,s.jsx)("option",{value:"price-asc",children:"Lowest Price"}),(0,s.jsx)("option",{value:"createdAt-desc",children:"Recently Listed"})]})]}),0===v.length?(0,s.jsxs)("div",{className:"text-center py-16 rounded-lg border bg-muted/30",children:[(0,s.jsx)(i.Package,{className:"h-24 w-24 mx-auto text-muted-foreground mb-4"}),(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"No sold products yet"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-6",children:"When you make sales, they'll appear here"}),(0,s.jsx)(a.default,{href:"/products/new",children:(0,s.jsx)(p.default,{children:"List a Product"})})]}):(0,s.jsx)("div",{className:"space-y-4",children:v.map(e=>(0,s.jsx)("div",{className:"rounded-lg border bg-card p-6 hover:shadow-md transition-shadow",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:e.title}),(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"SOLD"})]}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4 line-clamp-2",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center gap-6 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-muted-foreground",children:"Sold Price"}),(0,s.jsx)("p",{className:"font-bold text-lg text-green-600",children:(0,h.formatPrice)(e.price)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-muted-foreground",children:"Category"}),(0,s.jsx)("p",{className:"font-medium",children:e.category?.name||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-muted-foreground",children:"Condition"}),(0,s.jsx)("p",{className:"font-medium capitalize",children:e.condition})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-muted-foreground",children:"Sold Date"}),(0,s.jsx)("p",{className:"font-medium",children:(0,h.formatDate)(e.updatedAt)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-muted-foreground",children:"Views"}),(0,s.jsx)("p",{className:"font-medium",children:e.views||0})]})]})]}),(0,s.jsxs)("div",{className:"mt-4 pt-4 border-t flex gap-2",children:[(0,s.jsxs)(p.default,{variant:"outline",size:"sm",onClick:()=>M(e._id),disabled:N===e._id,isLoading:N===e._id,children:[(0,s.jsx)(u,{className:"h-4 w-4 mr-2"}),"Re-list"]}),(0,s.jsx)(a.default,{href:`/products/${e._id}`,className:"flex-1",children:(0,s.jsx)(p.default,{variant:"outline",size:"sm",className:"w-full",children:"View Details"})})]}),e.images?.[0]&&(0,s.jsx)("div",{className:"ml-6 w-32 h-32 rounded-lg overflow-hidden border flex-shrink-0 relative",children:(0,s.jsx)(l.default,{src:e.images[0],alt:e.title,fill:!0,className:"object-cover",sizes:"128px"})})]})},e._id))})]})})}e.s(["default",()=>v],47038)}]);