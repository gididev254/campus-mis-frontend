module.exports=[92522,a=>{"use strict";var b=a.i(57850),c=a.i(13916);function d({children:a,className:d,variant:e="primary",size:f="md",isLoading:g=!1,loadingText:h,disabled:i,...j}){return(0,b.jsx)("button",{type:j.type||"button",className:(0,c.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-ring disabled:opacity-50 disabled:pointer-events-none disabled:cursor-not-allowed",{primary:"bg-primary text-primary-foreground hover:opacity-90 focus-visible:ring-primary",secondary:"bg-secondary text-secondary-foreground hover:opacity-90 focus-visible:ring-secondary",outline:"border border-border hover:bg-accent hover:text-accent-foreground focus-visible:ring-border",ghost:"hover:bg-accent hover:text-accent-foreground focus-visible:ring-accent",danger:"bg-destructive text-destructive-foreground hover:opacity-90 focus-visible:ring-destructive"}[e],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[f],d),disabled:i||g,"aria-live":g?"polite":void 0,"aria-busy":g,...j,children:g?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",role:"img",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,b.jsx)("span",{children:h||"Loading..."})]}):a})}a.s(["default",()=>d])},47940,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(32722);class e extends c.Component{constructor(a){super(a),this.state={hasError:!1,error:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,b){console.error("ClientErrorBoundary caught an error:",a,b)}resetError=()=>{this.setState({hasError:!1,error:null})};render(){if(this.state.hasError){let a=this.props.fallback||d.ErrorFallback;return(0,b.jsx)(a,{error:this.state.error,resetError:this.resetError})}return this.props.children}}a.s(["ClientErrorBoundary",()=>e])},26910,a=>{"use strict";let b=(0,a.i(31261).default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);a.s(["Package",()=>b],26910)},40360,a=>{"use strict";let b=(0,a.i(31261).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],40360)},29911,a=>{"use strict";let b=(0,a.i(31261).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);a.s(["TrendingUp",()=>b],29911)},72068,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(93609),e=a.i(59843),f=a.i(70579),g=a.i(26910),h=a.i(40360),i=a.i(29911),j=a.i(31261);let k=(0,j.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),l=(0,j.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var m=a.i(72084),n=a.i(35971),o=a.i(13916),p=a.i(92522);a.i(59888);var q=a.i(98534),r=a.i(47940);function s(){return(0,b.jsx)(r.ClientErrorBoundary,{children:(0,b.jsx)(t,{})})}function t(){let a=(0,d.useRouter)(),{isAuthenticated:j,user:r}=(0,n.useAuth)(),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)(!0),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)("updatedAt"),[A,B]=(0,c.useState)("desc"),[C,D]=(0,c.useState)({totalSold:0,totalRevenue:0,avgPrice:0});(0,c.useEffect)(()=>{j?r?.role!=="seller"&&r?.role!=="admin"?a.push("/products"):E():a.push("/login")},[j,r,y,A]);let E=async()=>{try{let a=await m.productsAPI.getSoldProducts({sortBy:y,sortOrder:A});t(a.data.data||[]);let b=a.data.data||[],c=b.reduce((a,b)=>a+(b.price||0),0),d=b.length>0?c/b.length:0;D({totalSold:b.length,totalRevenue:c,avgPrice:d})}catch(a){console.error("Failed to fetch sold products:",a),q.toast.error("Failed to load sold products.")}finally{v(!1)}},F=async b=>{if(confirm("Re-list this product? This will create a new active listing with the same details.")){x(b);try{await m.productsAPI.relistProduct(b,{}),q.toast.success("Product re-listed successfully!"),a.push("/seller/products")}catch(a){console.error("Failed to re-list product:",a),q.toast.error(a.response?.data?.message||"Failed to re-list product")}finally{x(null)}}};return u?(0,b.jsx)("div",{className:"container mx-auto px-4 py-16",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading sold products..."})]})}):(0,b.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)(g.Package,{className:"h-8 w-8 text-green-600"}),(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Sold Products History"})]}),(0,b.jsx)(e.default,{href:"/seller/products",children:(0,b.jsx)(p.default,{variant:"outline",children:"View Active Listings"})})]}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Track your completed sales and revenue"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,b.jsx)("div",{className:"rounded-lg border bg-card p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Sold"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-green-600",children:C.totalSold})]}),(0,b.jsx)(g.Package,{className:"h-12 w-12 text-green-600 opacity-20"})]})}),(0,b.jsx)("div",{className:"rounded-lg border bg-card p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Revenue"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-primary",children:(0,o.formatPrice)(C.totalRevenue)})]}),(0,b.jsx)(i.TrendingUp,{className:"h-12 w-12 text-primary opacity-20"})]})}),(0,b.jsx)("div",{className:"rounded-lg border bg-card p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Average Price"}),(0,b.jsx)("p",{className:"text-3xl font-bold",children:(0,o.formatPrice)(C.avgPrice)})]}),(0,b.jsx)(h.Calendar,{className:"h-12 w-12 text-muted opacity-20"})]})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,b.jsx)(k,{className:"h-5 w-5 text-muted-foreground"}),(0,b.jsxs)("select",{value:`${y}-${A}`,onChange:a=>{let[b,c]=a.target.value.split("-");z(b),B(c)},className:"px-4 py-2 rounded-lg border bg-background",children:[(0,b.jsx)("option",{value:"updatedAt-desc",children:"Recently Sold"}),(0,b.jsx)("option",{value:"updatedAt-asc",children:"Oldest Sales"}),(0,b.jsx)("option",{value:"price-desc",children:"Highest Price"}),(0,b.jsx)("option",{value:"price-asc",children:"Lowest Price"}),(0,b.jsx)("option",{value:"createdAt-desc",children:"Recently Listed"})]})]}),0===s.length?(0,b.jsxs)("div",{className:"text-center py-16 rounded-lg border bg-muted/30",children:[(0,b.jsx)(g.Package,{className:"h-24 w-24 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"No sold products yet"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-6",children:"When you make sales, they'll appear here"}),(0,b.jsx)(e.default,{href:"/products/new",children:(0,b.jsx)(p.default,{children:"List a Product"})})]}):(0,b.jsx)("div",{className:"space-y-4",children:s.map(a=>(0,b.jsx)("div",{className:"rounded-lg border bg-card p-6 hover:shadow-md transition-shadow",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:a.title}),(0,b.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"SOLD"})]}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4 line-clamp-2",children:a.description}),(0,b.jsxs)("div",{className:"flex items-center gap-6 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Sold Price"}),(0,b.jsx)("p",{className:"font-bold text-lg text-green-600",children:(0,o.formatPrice)(a.price)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Category"}),(0,b.jsx)("p",{className:"font-medium",children:a.category?.name||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Condition"}),(0,b.jsx)("p",{className:"font-medium capitalize",children:a.condition})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Sold Date"}),(0,b.jsx)("p",{className:"font-medium",children:(0,o.formatDate)(a.updatedAt)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Views"}),(0,b.jsx)("p",{className:"font-medium",children:a.views||0})]})]})]}),(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t flex gap-2",children:[(0,b.jsxs)(p.default,{variant:"outline",size:"sm",onClick:()=>F(a._id),disabled:w===a._id,isLoading:w===a._id,children:[(0,b.jsx)(l,{className:"h-4 w-4 mr-2"}),"Re-list"]}),(0,b.jsx)(e.default,{href:`/products/${a._id}`,className:"flex-1",children:(0,b.jsx)(p.default,{variant:"outline",size:"sm",className:"w-full",children:"View Details"})})]}),a.images?.[0]&&(0,b.jsx)("div",{className:"ml-6 w-32 h-32 rounded-lg overflow-hidden border flex-shrink-0 relative",children:(0,b.jsx)(f.default,{src:a.images[0],alt:a.title,fill:!0,className:"object-cover",sizes:"128px"})})]})},a._id))})]})})}a.s(["default",()=>s],72068)}];

//# sourceMappingURL=frontend_5f461008._.js.map