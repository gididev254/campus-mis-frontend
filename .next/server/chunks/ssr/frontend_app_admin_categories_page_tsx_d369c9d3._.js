module.exports=[67160,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(59843),e=a.i(18521),f=a.i(1892),g=a.i(21900);let h=(0,a.i(31261).default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);var i=a.i(59996),j=a.i(45634),k=a.i(46350),l=a.i(74155),m=a.i(47802),n=a.i(26910),o=a.i(37637),p=a.i(35971),q=a.i(39236),r=a.i(60328),s=a.i(94674),t=a.i(92522),u=a.i(18188),v=a.i(52485),w=a.i(47940);a.i(59888);var x=a.i(98534);function y(){return(0,b.jsx)(w.ClientErrorBoundary,{children:(0,b.jsx)(z,{})})}function z(){let{isAdmin:a}=(0,p.useAuth)(),[w,y]=(0,c.useState)([]),[z,A]=(0,c.useState)(!0),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(null),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)(null),[L,M]=(0,c.useState)(null),[N,O]=(0,c.useState)(""),{register:P,handleSubmit:Q,reset:R,formState:{errors:S,isSubmitting:T},setError:U}=(0,e.useForm)({resolver:(0,f.zodResolver)(r.categorySchema),mode:"onBlur",defaultValues:{isActive:!0}});(0,c.useEffect)(()=>{if(!a){M({type:"error",text:"Access denied. Admin only."}),A(!1);return}V()},[a]);let V=(0,c.useCallback)(async()=>{if(a)try{A(!0);let a=(await q.categoriesAPI.getCategories()).data.categories;if(N){let b=N.toLowerCase();a=a.filter(a=>a.name.toLowerCase().includes(b)||a.description&&a.description.toLowerCase().includes(b))}y(a)}catch(a){console.error("Failed to fetch categories:",a),x.toast.error("Failed to load categories. Please try again."),M({type:"error",text:"Failed to load categories. Please try again."})}finally{A(!1)}},[a,N]);(0,c.useEffect)(()=>{let a=setTimeout(()=>{V()},500);return()=>clearTimeout(a)},[N,V]);let W=(0,c.useCallback)(()=>{R({name:"",description:"",icon:"",image:"",isActive:!0}),C(!0)},[R]),X=(0,c.useCallback)(a=>{G(a),R({name:a.name,description:a.description||"",icon:a.icon||"",image:a.image||"",isActive:a.isActive}),E(!0)},[R]),Y=(0,c.useCallback)(()=>{C(!1),E(!1),G(null),R({name:"",description:"",icon:"",image:"",isActive:!0})},[R]),Z=(0,c.useCallback)(async a=>{try{if(I(!0),D&&F)await q.categoriesAPI.updateCategory(F._id,{name:a.name,description:a.description||void 0,icon:a.icon||void 0,image:a.image||void 0,isActive:a.isActive}),y(w.map(b=>b._id===F._id?{...b,...a,productCount:b.productCount}:b)),M({type:"success",text:"Category updated successfully"}),x.toast.success("Category updated successfully");else{let b={...(await q.categoriesAPI.createCategory({name:a.name,description:a.description||void 0,icon:a.icon||void 0,image:a.image||void 0})).data.category,productCount:0};y([...w,b]),M({type:"success",text:"Category created successfully"}),x.toast.success("Category created successfully")}Y()}catch(b){console.error("Failed to save category:",b);let a=b instanceof Error&&"response"in b&&b.response?.data?.message||"Failed to save category";M({type:"error",text:a}),U("root",{type:"manual",message:a}),x.toast.error(a)}finally{I(!1)}},[D,F,w,Y,U]),$=(0,c.useCallback)(async a=>{let b=w.find(b=>b._id===a);if(b&&b.productCount>0){let a=`Cannot delete category with ${b.productCount} products. Please reassign products first.`;M({type:"error",text:a}),x.toast.error(a);return}if(confirm("Are you sure you want to delete this category? This action cannot be undone."))try{K(a),await q.categoriesAPI.deleteCategory(a),y(w.filter(b=>b._id!==a)),M({type:"success",text:"Category deleted successfully"}),x.toast.success("Category deleted successfully")}catch(b){console.error("Failed to delete category:",b);let a="Failed to delete category. Please try again.";M({type:"error",text:a}),x.toast.error(a)}finally{K(null)}},[w]),_=(0,c.useCallback)(async a=>{try{await q.categoriesAPI.updateCategory(a._id,{isActive:!a.isActive}),y(w.map(b=>b._id===a._id?{...b,isActive:!b.isActive}:b)),M({type:"success",text:`Category ${a.isActive?"deactivated":"activated"} successfully`})}catch(a){console.error("Failed to toggle category status:",a),x.toast.error("Failed to update category status. Please try again."),M({type:"error",text:"Failed to update category status. Please try again."})}},[w]);if(!a)return(0,b.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,b.jsx)(s.Card,{className:"max-w-md mx-auto",children:(0,b.jsx)(s.CardContent,{className:"py-8",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(h,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Access Denied"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"You don't have permission to access this page."})]})})})});if(z)return(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,b.jsx)(v.PageHeaderSkeleton,{showSubtitle:!0,showActions:!0}),(0,b.jsx)(v.TableSkeleton,{rows:8,columns:5})]});let aa=w.filter(a=>a.isActive).length,ab=w.filter(a=>!a.isActive).length,ac=w.reduce((a,b)=>a+(b.productCount||0),0);return(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)(d.default,{href:"/admin",className:"inline-flex items-center text-muted-foreground hover:text-foreground mb-4",children:[(0,b.jsx)(g.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Category Management"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage product categories"})]}),(0,b.jsxs)(t.default,{onClick:W,className:"flex items-center",children:[(0,b.jsx)(i.Plus,{className:"h-4 w-4 mr-2"}),"New Category"]})]})]}),L&&(0,b.jsx)("div",{className:`mb-6 p-4 rounded-lg ${"success"===L.type?"bg-green-50 text-green-900 dark:bg-green-900/20 dark:text-green-200":"bg-red-50 text-red-900 dark:bg-red-900/20 dark:text-red-200"}`,children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{children:L.text}),(0,b.jsx)("button",{onClick:()=>M(null),className:"ml-4 hover:opacity-70",children:(0,b.jsx)(m.X,{className:"h-4 w-4"})})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,b.jsxs)(s.Card,{children:[(0,b.jsxs)(s.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(s.CardTitle,{className:"text-sm font-medium",children:"Total Categories"}),(0,b.jsx)(h,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)(s.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:w.length})})]}),(0,b.jsxs)(s.Card,{children:[(0,b.jsxs)(s.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(s.CardTitle,{className:"text-sm font-medium",children:"Active"}),(0,b.jsx)(l.Check,{className:"h-4 w-4 text-green-600"})]}),(0,b.jsx)(s.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:aa})})]}),(0,b.jsxs)(s.Card,{children:[(0,b.jsxs)(s.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(s.CardTitle,{className:"text-sm font-medium",children:"Inactive"}),(0,b.jsx)(m.X,{className:"h-4 w-4 text-gray-600"})]}),(0,b.jsx)(s.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-gray-600",children:ab})})]}),(0,b.jsxs)(s.Card,{children:[(0,b.jsxs)(s.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(s.CardTitle,{className:"text-sm font-medium",children:"Total Products"}),(0,b.jsx)(n.Package,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)(s.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:ac})})]})]}),(0,b.jsx)(s.Card,{className:"mb-6",children:(0,b.jsx)(s.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(o.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)("input",{type:"text",placeholder:"Search by name or description...",value:N,onChange:a=>O(a.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})})}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:0===w.length?(0,b.jsx)(s.Card,{className:"col-span-full",children:(0,b.jsx)(s.CardContent,{className:"py-12",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(h,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No Categories Found"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:N?"Try adjusting your search terms.":"Get started by creating your first category."})]})})}):w.map(a=>(0,b.jsxs)(s.Card,{className:a.isActive?"":"opacity-60",children:[(0,b.jsx)(s.CardHeader,{children:(0,b.jsx)("div",{className:"flex items-start justify-between",children:(0,b.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[a.icon?(0,b.jsx)("div",{className:"text-3xl",children:a.icon}):(0,b.jsx)("div",{className:"w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,b.jsx)(h,{className:"h-6 w-6 text-primary"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(s.CardTitle,{className:"text-lg",children:a.name}),a.description&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:a.description})]})]})})}),(0,b.jsx)(s.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Products:"}),(0,b.jsx)("span",{className:"font-medium",children:a.productCount||0})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Status:"}),(0,b.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}`,children:a.isActive?"Active":"Inactive"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Slug:"}),(0,b.jsx)("span",{className:"font-mono text-xs",children:a.slug})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2 pt-2 border-t",children:[(0,b.jsx)(t.default,{onClick:()=>_(a),disabled:J===a._id,size:"sm",variant:"outline",className:"flex-1",children:a.isActive?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.X,{className:"h-3 w-3 mr-1"}),"Deactivate"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.Check,{className:"h-3 w-3 mr-1"}),"Activate"]})}),(0,b.jsx)(t.default,{onClick:()=>X(a),disabled:J===a._id,size:"sm",variant:"outline",children:(0,b.jsx)(j.Edit,{className:"h-3 w-3"})}),(0,b.jsx)(t.default,{onClick:()=>$(a._id),disabled:J===a._id||(a.productCount||0)>0,size:"sm",variant:"danger",children:J===a._id?"...":(0,b.jsx)(k.Trash2,{className:"h-3 w-3"})})]})]})})]},a._id))}),(B||D)&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-background rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-4",children:D?"Edit Category":"Create New Category"}),S.root&&(0,b.jsx)("div",{className:"mb-4 p-3 rounded-lg bg-destructive/10 text-destructive text-sm",children:S.root.message}),(0,b.jsxs)("form",{onSubmit:Q(Z),className:"space-y-4",noValidate:!0,children:[(0,b.jsx)(u.default,{label:"Name",type:"text",placeholder:"e.g., Electronics",error:S.name?.message,...P("name")}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Description"}),(0,b.jsx)("textarea",{...P("description"),placeholder:"Brief description of the category...",rows:3,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 resize-none ${S.description?"border-destructive focus:ring-destructive":"border-input focus:ring-primary"}`}),S.description&&(0,b.jsx)("p",{className:"mt-1 text-sm text-destructive",children:S.description.message})]}),(0,b.jsx)(u.default,{label:"Icon (Emoji)",type:"text",placeholder:"e.g., ðŸ’»",error:S.icon?.message,...P("icon")}),(0,b.jsx)(u.default,{label:"Image URL",type:"url",placeholder:"https://example.com/image.jpg",error:S.image?.message,...P("image")}),D&&(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"isActive",...P("isActive"),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),(0,b.jsx)("label",{htmlFor:"isActive",className:"text-sm font-medium",children:"Active (visible to users)"})]}),(0,b.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,b.jsx)(t.default,{type:"button",onClick:Y,variant:"outline",disabled:H,children:"Cancel"}),(0,b.jsx)(t.default,{type:"submit",isLoading:H,children:H?"Saving...":D?"Update":"Create"})]})]})]})})]})}a.s(["default",()=>y],67160)}];

//# sourceMappingURL=frontend_app_admin_categories_page_tsx_d369c9d3._.js.map