module.exports=[98240,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(59843),e=a.i(70579),f=a.i(21900),g=a.i(26910),h=a.i(37637),i=a.i(41379),j=a.i(81353),k=a.i(31261);let l=(0,k.default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var m=a.i(74155),n=a.i(47802),o=a.i(46350);let p=(0,k.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var q=a.i(40360),r=a.i(42357),s=a.i(35971),t=a.i(72084),u=a.i(94674),v=a.i(92522),w=a.i(52485),x=a.i(13916),y=a.i(47940);a.i(59888);var z=a.i(98534);function A(){return(0,b.jsx)(y.ClientErrorBoundary,{children:(0,b.jsx)(B,{})})}function B(){let{isAdmin:a}=(0,s.useAuth)(),[k,y]=(0,c.useState)([]),[A,B]=(0,c.useState)(!0),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)("all"),[G,H]=(0,c.useState)(1),[I,J]=(0,c.useState)(1),[K,L]=(0,c.useState)(0),[M,N]=(0,c.useState)(null),[O,P]=(0,c.useState)(null),[Q,R]=(0,c.useState)(null);(0,c.useEffect)(()=>{if(!a){R({type:"error",text:"Access denied. Admin only."}),B(!1);return}S()},[a,G,E]);let S=(0,c.useCallback)(async()=>{if(a)try{B(!0);let a={page:G,limit:20};"all"!==E&&(a.status=E);let b=(await t.productsAPI.getProducts(a)).data,c=b.data||[];if(C){let a=C.toLowerCase();c=c.filter(b=>b.title.toLowerCase().includes(a)||b.description.toLowerCase().includes(a)||(b.seller?.name||"").toLowerCase().includes(a)||b.category.name.toLowerCase().includes(a))}y(c),J(b.pagination.pages),L(b.pagination.total)}catch(a){console.error("Failed to fetch products:",a),z.toast.error("Failed to load products. Please try again."),R({type:"error",text:"Failed to load products. Please try again."})}finally{B(!1)}},[a,G,E,C]);(0,c.useEffect)(()=>{if(void 0!==C){let a=setTimeout(()=>{1===G?S():H(1)},500);return()=>clearTimeout(a)}},[C,G,S]);let T=(0,c.useCallback)(async(a,b)=>{try{N(a);let c=new FormData,d=k.find(b=>b._id===a);d&&(c.append("title",d.title),c.append("description",d.description),c.append("price",d.price.toString()),c.append("category",d.category._id),c.append("condition",d.condition),c.append("location",d.location),c.append("status",b),void 0!==d.isNegotiable&&c.append("isNegotiable",d.isNegotiable.toString()),await t.productsAPI.updateProduct(a,c),y(k.map(c=>c._id===a?{...c,status:b}:c)),R({type:"success",text:`Product ${"available"===b?"approved":"sold"===b?"marked as sold":"pending"} successfully`}))}catch(a){console.error("Failed to update product status:",a),z.toast.error("Failed to update product status. Please try again."),R({type:"error",text:"Failed to update product status. Please try again."})}finally{N(null)}},[k]),U=(0,c.useCallback)(async a=>{if(confirm("Are you sure you want to delete this product? This action cannot be undone."))try{P(a),await t.productsAPI.deleteProduct(a),y(k.filter(b=>b._id!==a)),L(a=>a-1),R({type:"success",text:"Product deleted successfully"})}catch(a){console.error("Failed to delete product:",a),z.toast.error("Failed to delete product. Please try again."),R({type:"error",text:"Failed to delete product. Please try again."})}finally{P(null)}},[k]);if(!a)return(0,b.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,b.jsx)(u.Card,{className:"max-w-md mx-auto",children:(0,b.jsx)(u.CardContent,{className:"py-8",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(g.Package,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Access Denied"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"You don't have permission to access this page."})]})})})});if(A)return(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,b.jsx)(w.PageHeaderSkeleton,{showSubtitle:!0,showActions:!1}),(0,b.jsx)(w.StatsCardsSkeleton,{count:4}),(0,b.jsx)("div",{className:"mt-8",children:(0,b.jsx)(w.ProductCardHorizontalSkeleton,{count:5})})]});let V=k.filter(a=>a&&"pending"===a.status).length,W=k.filter(a=>a&&"available"===a.status).length,X=k.filter(a=>a&&"sold"===a.status).length;return(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)(d.default,{href:"/admin",className:"inline-flex items-center text-muted-foreground hover:text-foreground mb-4",children:[(0,b.jsx)(f.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Product Management"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Moderate and manage all products"})]}),Q&&(0,b.jsx)("div",{className:`mb-6 p-4 rounded-lg ${"success"===Q.type?"bg-green-50 text-green-900 dark:bg-green-900/20 dark:text-green-200":"bg-red-50 text-red-900 dark:bg-red-900/20 dark:text-red-200"}`,children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{children:Q.text}),(0,b.jsx)("button",{onClick:()=>R(null),className:"ml-4 hover:opacity-70",children:(0,b.jsx)(n.X,{className:"h-4 w-4"})})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,b.jsxs)(u.Card,{children:[(0,b.jsxs)(u.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(u.CardTitle,{className:"text-sm font-medium",children:"Total Products"}),(0,b.jsx)(g.Package,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)(u.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:K})})]}),(0,b.jsxs)(u.Card,{children:[(0,b.jsxs)(u.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(u.CardTitle,{className:"text-sm font-medium",children:"Pending Review"}),(0,b.jsx)(i.Eye,{className:"h-4 w-4 text-yellow-600"})]}),(0,b.jsx)(u.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:V})})]}),(0,b.jsxs)(u.Card,{children:[(0,b.jsxs)(u.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(u.CardTitle,{className:"text-sm font-medium",children:"Available"}),(0,b.jsx)(m.Check,{className:"h-4 w-4 text-green-600"})]}),(0,b.jsx)(u.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:W})})]}),(0,b.jsxs)(u.Card,{children:[(0,b.jsxs)(u.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(u.CardTitle,{className:"text-sm font-medium",children:"Sold"}),(0,b.jsx)(j.ShoppingCart,{className:"h-4 w-4 text-gray-600"})]}),(0,b.jsx)(u.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-gray-600",children:X})})]})]}),(0,b.jsx)(u.Card,{className:"mb-6",children:(0,b.jsx)(u.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(h.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)("input",{type:"text",placeholder:"Search by title, description, seller, or category...",value:C,onChange:a=>D(a.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,b.jsxs)("select",{value:E,onChange:a=>{F(a.target.value),H(1)},className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,b.jsx)("option",{value:"all",children:"All Status"}),(0,b.jsx)("option",{value:"pending",children:"Pending Review"}),(0,b.jsx)("option",{value:"available",children:"Available"}),(0,b.jsx)("option",{value:"sold",children:"Sold"})]})]})})}),(0,b.jsx)("div",{className:"space-y-4",children:0===k.length?(0,b.jsx)(u.Card,{children:(0,b.jsx)(u.CardContent,{className:"py-12",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(g.Package,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No Products Found"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:C||"all"!==E?"Try adjusting your filters or search terms.":"No products listed yet."})]})})}):k.map(a=>(0,b.jsx)(u.Card,{className:"overflow-hidden",children:(0,b.jsx)(u.CardContent,{className:"p-0",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,b.jsx)("div",{className:"w-full md:w-48 h-48 relative flex-shrink-0",children:a.images?.[0]?(0,b.jsx)(e.default,{src:a.images[0],alt:a.title,fill:!0,className:"object-cover"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-muted",children:(0,b.jsx)(l,{className:"h-12 w-12 text-muted-foreground"})})}),(0,b.jsx)("div",{className:"flex-1 p-6",children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-1",children:a.title}),(0,b.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[(0,b.jsxs)("span",{children:["by ",a.seller?.name||"Unknown"]}),(0,b.jsx)("span",{children:"â€¢"}),(0,b.jsx)("span",{children:a.category.name})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,b.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(a=>{switch(a){case"available":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"sold":default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}})(a.status)}`,children:a.status.charAt(0).toUpperCase()+a.status.slice(1)}),(0,b.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getConditionBadge(a.condition)}`,children:a.condition.split("-").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" ")})]})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:a.description}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(r.DollarSign,{className:"h-4 w-4 mr-1 text-green-600"}),(0,b.jsx)("span",{className:"font-bold text-lg",children:(0,x.formatPrice)(a.price)})]}),(0,b.jsxs)("div",{className:"flex items-center text-muted-foreground",children:[(0,b.jsx)(q.Calendar,{className:"h-3 w-3 mr-1"}),(0,b.jsxs)("span",{children:["Listed ",(0,x.formatDateShort)(a.createdAt)]})]}),(0,b.jsxs)("div",{className:"flex items-center text-muted-foreground",children:[(0,b.jsx)(i.Eye,{className:"h-3 w-3 mr-1"}),(0,b.jsxs)("span",{children:[a.views||0," views"]})]}),a.isNegotiable&&(0,b.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 px-2 py-1 rounded",children:"Negotiable"})]}),(0,b.jsxs)("div",{className:"mt-3 flex items-center text-sm text-muted-foreground",children:[(0,b.jsxs)("span",{className:"mr-4",children:["ðŸ“ ",a.location]}),(0,b.jsxs)(d.default,{href:`/products/${a._id}`,className:"text-primary hover:underline flex items-center",children:["View Details ",(0,b.jsx)(p,{className:"h-3 w-3 ml-1"})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col space-y-2 lg:w-48",children:["pending"===a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(v.default,{onClick:()=>T(a._id,"available"),disabled:M===a._id,className:"w-full bg-green-600 hover:bg-green-700",children:M===a._id?"Processing...":(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.Check,{className:"h-4 w-4 mr-2"}),"Approve"]})}),(0,b.jsx)(v.default,{onClick:()=>T(a._id,"sold"),disabled:M===a._id,variant:"outline",className:"w-full",children:"Mark as Sold"})]}),"available"===a.status&&(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(v.default,{onClick:()=>T(a._id,"sold"),disabled:M===a._id,variant:"outline",className:"w-full",children:M===a._id?"Processing...":(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.ShoppingCart,{className:"h-4 w-4 mr-2"}),"Mark Sold"]})})}),"sold"===a.status&&(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(v.default,{onClick:()=>T(a._id,"available"),disabled:M===a._id,variant:"outline",className:"w-full",children:M===a._id?"Processing...":(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.Check,{className:"h-4 w-4 mr-2"}),"Mark Available"]})})}),(0,b.jsx)(v.default,{onClick:()=>U(a._id),disabled:M===a._id||O===a._id,variant:"danger",className:"w-full",children:O===a._id?"Deleting...":(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Trash2,{className:"h-4 w-4 mr-2"}),"Delete"]})})]})]})})]})})},a._id))}),I>1&&(0,b.jsxs)("div",{className:"flex justify-center items-center space-x-2 mt-6",children:[(0,b.jsx)(v.default,{onClick:()=>H(a=>Math.max(1,a-1)),disabled:1===G,variant:"outline",size:"sm",children:"Previous"}),(0,b.jsxs)("span",{className:"text-sm",children:["Page ",G," of ",I]}),(0,b.jsx)(v.default,{onClick:()=>H(a=>Math.min(I,a+1)),disabled:G===I,variant:"outline",size:"sm",children:"Next"})]})]})}a.s(["default",()=>A],98240)}];

//# sourceMappingURL=frontend_app_admin_products_page_tsx_e77c0c6a._.js.map