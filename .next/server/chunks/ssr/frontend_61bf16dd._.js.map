{"version":3,"sources":["../../../../../frontend/components/ui/Button.tsx","../../../../../frontend/components/ClientErrorBoundary.tsx","../../../../../frontend/components/ui/Input.tsx","../../../../../frontend/node_modules/lucide-react/src/icons/arrow-left.ts","../../../../../frontend/node_modules/lucide-react/src/icons/check.ts","../../../../../frontend/components/Avatar.tsx","../../../../../frontend/node_modules/lucide-react/src/icons/circle.ts","../../../../../frontend/app/buyer/messages/page.tsx","../../../../../frontend/node_modules/lucide-react/src/icons/send.ts"],"sourcesContent":["import React from 'react';\nimport { cn } from '@/lib/utils';\n\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: 'primary' | 'secondary' | 'outline' | 'ghost' | 'danger';\n  size?: 'sm' | 'md' | 'lg';\n  isLoading?: boolean;\n  loadingText?: string;\n}\n\nexport default function Button({\n  children,\n  className,\n  variant = 'primary',\n  size = 'md',\n  isLoading = false,\n  loadingText,\n  disabled,\n  ...props\n}: ButtonProps) {\n  const baseStyles = 'inline-flex items-center justify-center rounded-lg font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-ring disabled:opacity-50 disabled:pointer-events-none disabled:cursor-not-allowed';\n\n  const variants = {\n    primary: 'bg-primary text-primary-foreground hover:opacity-90 focus-visible:ring-primary',\n    secondary: 'bg-secondary text-secondary-foreground hover:opacity-90 focus-visible:ring-secondary',\n    outline: 'border border-border hover:bg-accent hover:text-accent-foreground focus-visible:ring-border',\n    ghost: 'hover:bg-accent hover:text-accent-foreground focus-visible:ring-accent',\n    danger: 'bg-destructive text-destructive-foreground hover:opacity-90 focus-visible:ring-destructive',\n  };\n\n  const sizes = {\n    sm: 'px-3 py-1.5 text-sm',\n    md: 'px-4 py-2 text-base',\n    lg: 'px-6 py-3 text-lg',\n  };\n\n  return (\n    <button\n      type={props.type || 'button'}\n      className={cn(baseStyles, variants[variant], sizes[size], className)}\n      disabled={disabled || isLoading}\n      aria-live={isLoading ? 'polite' : undefined}\n      aria-busy={isLoading}\n      {...props}\n    >\n      {isLoading ? (\n        <>\n          <svg\n            className=\"animate-spin -ml-1 mr-2 h-4 w-4\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            aria-hidden=\"true\"\n            role=\"img\"\n          >\n            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n          </svg>\n          <span>{loadingText || 'Loading...'}</span>\n        </>\n      ) : children}\n    </button>\n  );\n}\n","'use client';\n\nimport React, { Component, ReactNode } from 'react';\nimport { ErrorFallback } from '@/components/ui/ErrorFallback';\n\ninterface ClientErrorBoundaryProps {\n  children: ReactNode;\n  fallback?: React.ComponentType<ErrorFallbackProps>;\n}\n\ninterface ClientErrorBoundaryState {\n  hasError: boolean;\n  error: Error | null;\n}\n\ninterface ErrorFallbackProps {\n  error: Error | null;\n  resetError: () => void;\n}\n\nexport class ClientErrorBoundary extends Component<\n  ClientErrorBoundaryProps,\n  ClientErrorBoundaryState\n> {\n  constructor(props: ClientErrorBoundaryProps) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null,\n    };\n  }\n\n  static getDerivedStateFromError(error: Error): Partial<ClientErrorBoundaryState> {\n    return {\n      hasError: true,\n      error,\n    };\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    console.error('ClientErrorBoundary caught an error:', error, errorInfo);\n  }\n\n  resetError = () => {\n    this.setState({\n      hasError: false,\n      error: null,\n    });\n  };\n\n  render() {\n    if (this.state.hasError) {\n      const FallbackComponent = this.props.fallback || ErrorFallback;\n      return <FallbackComponent error={this.state.error} resetError={this.resetError} />;\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ClientErrorBoundary;\n","'use client';\n\nimport React from 'react';\nimport { cn } from '@/lib/utils';\n\ninterface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {\n  label?: string;\n  error?: string;\n  helperText?: string;\n}\n\nexport default function Input({ label, error, helperText, className, id, ...props }: InputProps) {\n  const generatedId = React.useId();\n  const inputId = id || generatedId;\n  const errorId = error ? `${inputId}-error` : undefined;\n  const helperId = helperText ? `${inputId}-helper` : undefined;\n  const describedBy = [errorId, helperId].filter(Boolean).join(' ') || undefined;\n\n  return (\n    <div className=\"w-full\">\n      {label && (\n        <label htmlFor={inputId} className=\"block text-sm font-medium mb-1.5 text-foreground\">\n          {label}\n          {props.required && (\n            <span className=\"text-destructive ml-1\" aria-label=\"required\">\n              *\n            </span>\n          )}\n        </label>\n      )}\n      <input\n        id={inputId}\n        aria-invalid={error ? 'true' : 'false'}\n        aria-describedby={describedBy}\n        aria-required={props.required ? 'true' : undefined}\n        className={cn(\n          'w-full px-4 py-2.5 rounded-lg border border-input bg-background text-foreground',\n          'placeholder:text-muted-foreground',\n          'focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent focus-visible:ring-2 focus-visible:ring-offset-2',\n          'disabled:opacity-50 disabled:cursor-not-allowed',\n          error && 'border-destructive focus:ring-destructive focus-visible:ring-destructive',\n          className\n        )}\n        {...props}\n      />\n      {error && (\n        <p id={errorId} className=\"mt-1 text-sm text-destructive\" role=\"alert\" aria-live=\"assertive\">\n          {error}\n        </p>\n      )}\n      {helperText && !error && (\n        <p id={helperId} className=\"mt-1 text-sm text-muted-foreground\">\n          {helperText}\n        </p>\n      )}\n    </div>\n  );\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm12 19-7-7 7-7', key: '1l729n' }],\n  ['path', { d: 'M19 12H5', key: 'x3x0zl' }],\n];\n\n/**\n * @component @name ArrowLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTIgMTktNy03IDctNyIgLz4KICA8cGF0aCBkPSJNMTkgMTJINSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowLeft = createLucideIcon('arrow-left', __iconNode);\n\nexport default ArrowLeft;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['path', { d: 'M20 6 9 17l-5-5', key: '1gmf2c' }]];\n\n/**\n * @component @name Check\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjAgNiA5IDE3bC01LTUiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Check = createLucideIcon('check', __iconNode);\n\nexport default Check;\n","'use client';\n\nimport Image from 'next/image';\nimport { useState, useCallback, useMemo, memo } from 'react';\nimport { cn } from '@/lib/utils';\nimport { User } from 'lucide-react';\nimport { DEFAULT_BLUR_DATA_URL, IMAGE_SIZES } from '@/lib/imageUtils';\n\ninterface AvatarProps {\n  src?: string | null;\n  alt: string;\n  size?: 'sm' | 'md' | 'lg' | 'xl' | number;\n  className?: string;\n  priority?: boolean;\n  showOnlineStatus?: boolean;\n  isOnline?: boolean;\n}\n\n// Static size mappings - moved outside component\nconst SIZE_CLASSES = {\n  sm: 'w-8 h-8',\n  md: 'w-10 h-10',\n  lg: 'w-12 h-12',\n  xl: 'w-16 h-16',\n} as const;\n\nconst SIZE_PX = {\n  sm: 32,\n  md: 40,\n  lg: 48,\n  xl: 64,\n} as const;\n\n/**\n * Avatar component for user profile pictures with fallback and online status\n *\n * @example\n * <Avatar\n *   src={user.avatar}\n *   alt={user.name}\n *   size=\"md\"\n *   showOnlineStatus\n *   isOnline={user.isOnline}\n * />\n */\nconst Avatar = memo(function Avatar({\n  src,\n  alt,\n  size = 'md',\n  className,\n  priority = false,\n  showOnlineStatus = false,\n  isOnline = false,\n}: AvatarProps) {\n  const [hasError, setHasError] = useState(false);\n\n  // Memoize size classes to avoid recalculation\n  const { sizeClass, customSize } = useMemo(() => {\n    return {\n      sizeClass: typeof size === 'number' ? '' : SIZE_CLASSES[size],\n      customSize: typeof size === 'number' ? { width: size, height: size } : {},\n    };\n  }, [size]);\n\n  // Memoize image sizes attribute\n  const imageSizes = useMemo(() => {\n    return IMAGE_SIZES.avatar;\n  }, []);\n\n  // Stable error handler with useCallback\n  const handleError = useCallback(() => {\n    setHasError(true);\n  }, []);\n\n  // Memoize initials calculation\n  const initials = useMemo(() => {\n    const parts = alt.trim().split(' ');\n    if (parts.length >= 2) {\n      return `${parts[0][0]}${parts[1][0]}`.toUpperCase();\n    }\n    return alt[0].toUpperCase();\n  }, [alt]);\n\n  // Memoize online status color\n  const onlineStatusColor = useMemo(() => {\n    return isOnline ? 'bg-green-500' : 'bg-gray-400';\n  }, [isOnline]);\n\n  return (\n    <div\n      className={cn(\n        'relative rounded-full overflow-hidden bg-primary/10 flex items-center justify-center flex-shrink-0',\n        sizeClass,\n        className\n      )}\n      style={customSize}\n    >\n      {src && !hasError ? (\n        <Image\n          src={src}\n          alt={alt}\n          fill\n          className=\"object-cover\"\n          sizes={imageSizes}\n          priority={priority}\n          placeholder=\"blur\"\n          blurDataURL={DEFAULT_BLUR_DATA_URL}\n          onError={handleError}\n        />\n      ) : (\n        <div className=\"w-full h-full flex items-center justify-center text-primary font-semibold\">\n          {initials || <User className=\"h-1/2 w-1/2\" />}\n        </div>\n      )}\n\n      {/* Online status indicator */}\n      {showOnlineStatus && (\n        <span\n          className={cn(\n            'absolute bottom-0 right-0 w-3 h-3 border-2 border-background rounded-full transition-colors',\n            onlineStatusColor\n          )}\n          aria-label={isOnline ? 'Online' : 'Offline'}\n        />\n      )}\n    </div>\n  );\n});\n\nexport default Avatar;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }]];\n\n/**\n * @component @name Circle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Circle = createLucideIcon('circle', __iconNode);\n\nexport default Circle;\n","'use client';\n\nimport { useEffect, useState, useRef, useCallback } from 'react';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport Link from 'next/link';\nimport Avatar from '@/components/Avatar';\nimport { Loader2, MessageCircle, Send, ArrowLeft, AlertCircle, Check, CheckCheck, Circle } from 'lucide-react';\nimport { messagesAPI } from '@/lib/api/messages';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { useSocket } from '@/contexts/SocketContext';\nimport Button from '@/components/ui/Button';\nimport Input from '@/components/ui/Input';\nimport type { Message, User } from '@/types';\nimport { ClientErrorBoundary } from '@/components/ClientErrorBoundary';\n\nexport default function BuyerMessagesPage() {\n  return (\n    <ClientErrorBoundary>\n      <BuyerMessagesPageContent />\n    </ClientErrorBoundary>\n  );\n}\n\nfunction BuyerMessagesPageContent() {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const { user, isAuthenticated } = useAuth();\n  const { socket, isConnected, onlineUsers, isReconnecting, emitWithQueue, queuedMessageCount } = useSocket();\n\n  const targetUserId = searchParams.get('userId');\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const typingTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [sending, setSending] = useState(false);\n  const [newMessage, setNewMessage] = useState('');\n  const [otherUser, setOtherUser] = useState<User | null>(null);\n  const [error, setError] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const [otherUserTyping, setOtherUserTyping] = useState(false);\n  const [messageQueued, setMessageQueued] = useState(false);\n\n  // Fetch initial messages\n  useEffect(() => {\n    if (!isAuthenticated) {\n      router.push('/login');\n      return;\n    }\n\n    if (targetUserId) {\n      fetchMessages();\n    }\n  }, [isAuthenticated, targetUserId, router]);\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  // Join conversation room\n  useEffect(() => {\n    if (socket && isConnected && targetUserId && user?._id) {\n      const roomName = [user._id, targetUserId].sort().join(':');\n\n      // Join the conversation room\n      socket.emit('join:conversation', { userId: targetUserId });\n\n      // Listen for new messages\n      socket.on('message:new', (message: Message) => {\n        setMessages((prev) => {\n          // Check if message already exists\n          const exists = prev.some((m) => m._id === message._id);\n          if (exists) return prev;\n          return [...prev, message];\n        });\n      });\n\n      // Listen for typing indicators\n      socket.on('typing:start', ({ userId }: { userId: string }) => {\n        if (userId === targetUserId) {\n          setOtherUserTyping(true);\n        }\n      });\n\n      socket.on('typing:stop', ({ userId }: { userId: string }) => {\n        if (userId === targetUserId) {\n          setOtherUserTyping(false);\n        }\n      });\n\n      // Listen for read receipts\n      socket.on('message:read', ({ messageId }: { messageId: string }) => {\n        setMessages((prev) =>\n          prev.map((msg) =>\n            msg._id === messageId ? { ...msg, isRead: true, readAt: new Date().toISOString() } : msg\n          )\n        );\n      });\n\n      // Cleanup\n      return () => {\n        socket.emit('leave:conversation', { userId: targetUserId });\n        socket.off('message:new');\n        socket.off('typing:start');\n        socket.off('typing:stop');\n        socket.off('message:read');\n      };\n    }\n  }, [socket, isConnected, targetUserId, user?._id]);\n\n  const fetchMessages = useCallback(async () => {\n    try {\n      const res = await messagesAPI.getConversation(targetUserId as string);\n      setMessages(res.data.data || []);\n      if (res.data.data.length > 0) {\n        const msg = res.data.data[0];\n        setOtherUser(msg.sender._id === targetUserId ? msg.sender : msg.receiver);\n      }\n    } catch (err) {\n      console.error('Failed to fetch messages:', err);\n        toast.error('Failed to load messages.');\n      setError('Failed to load messages. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  }, [targetUserId]);\n\n  const handleTyping = useCallback(() => {\n    if (!socket || !isConnected || !targetUserId) return;\n\n    // Use emitWithQueue for typing indicators\n    emitWithQueue('typing:start', { userId: targetUserId });\n\n    // Clear existing timeout\n    if (typingTimeoutRef.current) {\n      clearTimeout(typingTimeoutRef.current);\n    }\n\n    // Emit typing stop after 2 seconds of inactivity\n    typingTimeoutRef.current = setTimeout(() => {\n      if (isConnected) {\n        emitWithQueue('typing:stop', { userId: targetUserId });\n      }\n    }, 2000);\n  }, [socket, isConnected, targetUserId, emitWithQueue]);\n\n  const handleSendMessage = useCallback(async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!newMessage.trim()) return;\n\n    // Stop typing indicator\n    if (typingTimeoutRef.current) {\n      clearTimeout(typingTimeoutRef.current);\n    }\n    if (socket && isConnected) {\n      socket.emit('typing:stop', { userId: targetUserId });\n    }\n\n    setSending(true);\n    setError('');\n\n    // Optimistic update\n    const tempMessage: Message = {\n      _id: `temp-${Date.now()}`,\n      sender: { _id: user?._id || '', name: user?.name || '', email: user?.email || '', role: user?.role || 'buyer', phone: user?.phone || '', avatar: user?.avatar },\n      receiver: { _id: targetUserId || '', name: otherUser?.name || '', email: otherUser?.email || '', role: otherUser?.role || 'seller', phone: otherUser?.phone || '', avatar: otherUser?.avatar },\n      content: newMessage,\n      createdAt: new Date().toISOString(),\n      isRead: false,\n    };\n\n    setMessages((prev) => [...prev, tempMessage]);\n    const messageContent = newMessage;\n    setNewMessage('');\n\n    try {\n      await messagesAPI.sendMessage({\n        receiver: targetUserId as string,\n        content: messageContent,\n      });\n      // Message will be added via socket event\n    } catch (err: unknown) {\n      // Remove optimistic message on error\n      setMessages((prev) => prev.filter((m) => m._id !== tempMessage._id));\n      const message = err instanceof Error && 'response' in err\n        ? (err as Error & { response?: { data?: { message?: string } } }).response?.data?.message || 'Failed to send message'\n        : 'Failed to send message';\n      setError(message);\n      setNewMessage(messageContent);\n    } finally {\n      setSending(false);\n    }\n  }, [newMessage, user, otherUser, targetUserId, socket, isConnected]);\n\n  const isUserOnline = otherUser && onlineUsers.has(otherUser._id);\n\n  if (loading) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"max-w-4xl mx-auto\">\n          {/* Header skeleton */}\n          <div className=\"flex items-center justify-between mb-6\">\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"w-10 h-10 bg-muted rounded-full animate-pulse\" />\n              <div className=\"space-y-2\">\n                <div className=\"h-8 bg-muted rounded w-48 animate-pulse\" />\n                <div className=\"h-4 bg-muted rounded w-32 animate-pulse\" />\n              </div>\n            </div>\n          </div>\n\n          {/* Messages skeleton */}\n          <div className=\"rounded-lg border bg-card p-6\">\n            <div className=\"space-y-4 max-h-[60vh] overflow-y-auto\">\n              {Array.from({ length: 5 }).map((_, i) => (\n                <div key={i} className=\"flex gap-4\">\n                  <div className=\"w-12 h-12 rounded-full bg-muted animate-pulse flex-shrink-0\" />\n                  <div className=\"flex-1 space-y-2\">\n                    <div className=\"h-4 bg-muted rounded w-3/4 animate-pulse\" />\n                    <div className=\"h-3 bg-muted rounded w-full animate-pulse\" />\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            {/* Input skeleton */}\n            <div className=\"flex space-x-3 mt-6\">\n              <div className=\"h-10 bg-muted rounded flex-1 animate-pulse\" />\n              <div className=\"h-10 w-12 bg-muted rounded animate-pulse\" />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <div className=\"max-w-4xl mx-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center space-x-4\">\n            <Button\n              variant=\"ghost\"\n              onClick={() => router.back()}\n              className=\"p-2\"\n              aria-label=\"Go back\"\n            >\n              <ArrowLeft className=\"h-5 w-5\" />\n            </Button>\n            <div className=\"flex items-center space-x-3\">\n              {otherUser && (\n                <Avatar\n                  src={otherUser.avatar}\n                  alt={otherUser.name}\n                  size=\"md\"\n                  showOnlineStatus\n                  isOnline={isUserOnline}\n                />\n              )}\n              <div>\n                <h1 className=\"text-2xl font-bold flex items-center space-x-2\">\n                  <span>{otherUser?.name || 'Messages'}</span>\n                  {isUserOnline && (\n                    <span className=\"text-sm font-normal text-green-500 flex items-center\">\n                      <Circle className=\"h-2 w-2 fill-current mr-1\" />\n                      Online\n                    </span>\n                  )}\n                </h1>\n                <p className=\"text-sm text-muted-foreground\">\n                  {otherUserTyping ? (\n                    <span className=\"text-primary animate-pulse\">Typing...</span>\n                  ) : isReconnecting ? (\n                    <span className=\"text-yellow-500 animate-pulse\">Reconnecting...</span>\n                  ) : (\n                    isUserOnline ? 'Active now' : 'Offline'\n                  )}\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Connection status */}\n          <div className=\"flex items-center space-x-2 text-sm text-muted-foreground\">\n            <div className={`w-2 h-2 rounded-full ${isConnected ? 'bg-green-500' : isReconnecting ? 'bg-yellow-500 animate-pulse' : 'bg-red-500'}`} />\n            <span>\n              {isConnected ? 'Connected' : isReconnecting ? `Reconnecting...` : 'Disconnected'}\n              {queuedMessageCount > 0 && ` (${queuedMessageCount} queued)`}\n            </span>\n          </div>\n        </div>\n\n        {/* Messages */}\n        <div className=\"rounded-lg border bg-card p-6\">\n          {error && (\n            <div className=\"mb-4 p-3 rounded-lg bg-destructive/10 text-destructive text-sm flex items-center space-x-2\">\n              <AlertCircle className=\"h-4 w-4 flex-shrink-0\" />\n              <p>{error}</p>\n            </div>\n          )}\n\n          <div className=\"space-y-4 mb-6 max-h-[60vh] overflow-y-auto\">\n            {messages.length === 0 ? (\n              <div className=\"text-center py-12 text-muted-foreground\">\n                No messages yet. Start the conversation!\n              </div>\n            ) : (\n              messages.map((message) => {\n                const isOwn = message.sender._id === user?._id;\n                const isTemp = message._id.startsWith('temp-');\n                return (\n                  <div\n                    key={message._id}\n                    className={`flex ${isOwn ? 'justify-end' : 'justify-start'}`}\n                  >\n                    <div className={`max-w-[70%] ${isOwn ? 'order-2' : 'order-1'}`}>\n                      <div\n                        className={`rounded-lg p-4 ${\n                          isOwn\n                            ? 'bg-primary text-primary-foreground'\n                            : 'bg-muted'\n                        } ${isTemp ? 'opacity-60' : ''}`}\n                      >\n                        <p className=\"text-sm whitespace-pre-wrap break-words\">{message.content}</p>\n                        {message.product && (\n                          <Link\n                            href={`/products/${message.product._id}`}\n                            className=\"text-xs underline opacity-80 hover:opacity-100 inline-block mt-2\"\n                          >\n                            View Product\n                          </Link>\n                        )}\n                      </div>\n                      <div className=\"flex items-center justify-end space-x-1 mt-1 px-2\">\n                        <p className=\"text-xs text-muted-foreground\">\n                          {new Date(message.createdAt).toLocaleTimeString([], {\n                            hour: '2-digit',\n                            minute: '2-digit',\n                          })}\n                        </p>\n                        {isOwn && (\n                          <span className=\"text-xs\">\n                            {message.isRead ? (\n                              <CheckCheck className=\"h-3 w-3 text-blue-500 inline\" />\n                            ) : (\n                              <Check className=\"h-3 w-3 text-muted-foreground inline\" />\n                            )}\n                          </span>\n                        )}\n                        {isTemp && (\n                          <Loader2 className=\"h-3 w-3 animate-spin text-muted-foreground\" />\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                );\n              })\n            )}\n            <div ref={messagesEndRef} />\n          </div>\n\n          {/* Message Input */}\n          <form onSubmit={handleSendMessage} className=\"flex space-x-3\">\n            <Input\n              type=\"text\"\n              value={newMessage}\n              onChange={(e) => {\n                setNewMessage(e.target.value);\n                handleTyping();\n              }}\n              placeholder={\n                isReconnecting\n                  ? 'Reconnecting to server...'\n                  : queuedMessageCount > 0\n                  ? `Sending ${queuedMessageCount} queued message${queuedMessageCount > 1 ? 's' : ''}...`\n                  : 'Type a message...'\n              }\n              className=\"flex-1\"\n              disabled={sending || isReconnecting}\n            />\n            <Button\n              type=\"submit\"\n              disabled={sending || !newMessage.trim() || isReconnecting}\n              isLoading={sending}\n              className=\"px-4\"\n              title={\n                isReconnecting\n                  ? 'Waiting for connection...'\n                  : queuedMessageCount > 0\n                  ? `${queuedMessageCount} message${queuedMessageCount > 1 ? 's' : ''} in queue`\n                  : 'Send message'\n              }\n            >\n              <Send className=\"h-5 w-5\" />\n              {queuedMessageCount > 0 && (\n                <span className=\"ml-2 text-xs bg-yellow-500 text-white px-2 py-0.5 rounded-full\">\n                  {queuedMessageCount}\n                </span>\n              )}\n            </Button>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z',\n      key: '1ffxy3',\n    },\n  ],\n  ['path', { d: 'm21.854 2.147-10.94 10.939', key: '12cjpa' }],\n];\n\n/**\n * @component @name Send\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTQuNTM2IDIxLjY4NmEuNS41IDAgMCAwIC45MzctLjAyNGw2LjUtMTlhLjQ5Ni40OTYgMCAwIDAtLjYzNS0uNjM1bC0xOSA2LjVhLjUuNSAwIDAgMC0uMDI0LjkzN2w3LjkzIDMuMThhMiAyIDAgMCAxIDEuMTEyIDEuMTF6IiAvPgogIDxwYXRoIGQ9Im0yMS44NTQgMi4xNDctMTAuOTQgMTAuOTM5IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/send\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Send = createLucideIcon('send', __iconNode);\n\nexport default Send;\n"],"names":[],"mappings":"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","ignoreList":[3,4,6,8]}