module.exports=[92522,a=>{"use strict";var b=a.i(57850),c=a.i(13916);function d({children:a,className:d,variant:e="primary",size:f="md",isLoading:g=!1,loadingText:h,disabled:i,...j}){return(0,b.jsx)("button",{type:j.type||"button",className:(0,c.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-ring disabled:opacity-50 disabled:pointer-events-none disabled:cursor-not-allowed",{primary:"bg-primary text-primary-foreground hover:opacity-90 focus-visible:ring-primary",secondary:"bg-secondary text-secondary-foreground hover:opacity-90 focus-visible:ring-secondary",outline:"border border-border hover:bg-accent hover:text-accent-foreground focus-visible:ring-border",ghost:"hover:bg-accent hover:text-accent-foreground focus-visible:ring-accent",danger:"bg-destructive text-destructive-foreground hover:opacity-90 focus-visible:ring-destructive"}[e],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[f],d),disabled:i||g,"aria-live":g?"polite":void 0,"aria-busy":g,...j,children:g?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",role:"img",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,b.jsx)("span",{children:h||"Loading..."})]}):a})}a.s(["default",()=>d])},26910,a=>{"use strict";let b=(0,a.i(31261).default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);a.s(["Package",()=>b],26910)},99486,a=>{"use strict";let b=(0,a.i(31261).default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);a.s(["Star",()=>b],99486)},26638,a=>{"use strict";let b=(0,a.i(31261).default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);a.s(["MessageCircle",()=>b],26638)},42357,a=>{"use strict";let b=(0,a.i(31261).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);a.s(["DollarSign",()=>b],42357)},29825,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(93609),e=a.i(59843),f=a.i(95598),g=a.i(46350),h=a.i(84812),i=a.i(51600),j=a.i(26910),k=a.i(26638),l=a.i(99486),m=a.i(42357),n=a.i(52371),o=a.i(5596),p=a.i(35971),q=a.i(13916),r=a.i(92522),s=a.i(52485);a.i(59888);var t=a.i(98534);function u(){let a=(0,d.useRouter)(),{user:u,isAuthenticated:v}=(0,p.useAuth)(),{socket:w,isConnected:x}=(0,o.useSocket)(),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)(0),[C,D]=(0,c.useState)(!0),[E,F]=(0,c.useState)("all"),[G,H]=(0,c.useState)(1),[I,J]=(0,c.useState)(1);(0,c.useEffect)(()=>{v?K():a.push("/login")},[v,E,G]),(0,c.useEffect)(()=>{if(w&&x)return w.on("notification:new",({notification:a,unreadCount:b})=>{B(b),z(b=>[a,...b])}),w.on("notification:unread-count",({count:a})=>{B(a)}),()=>{w.off("notification:new"),w.off("notification:unread-count")}},[w,x]);let K=async()=>{D(!0);try{let a=await n.notificationsAPI.getNotifications({page:G,limit:20,unreadOnly:"unread"===E});z(a.data.data),B(a.data.unreadCount),J(a.data.pagination.pages)}catch(a){console.error("Failed to fetch notifications:",a),t.toast.error("Failed to load notifications.")}finally{D(!1)}},L=async a=>{try{await n.notificationsAPI.markAsRead(a),z(b=>b.map(b=>b._id===a?{...b,isRead:!0,readAt:new Date().toISOString()}:b)),B(a=>Math.max(0,a-1))}catch(a){console.error("Failed to mark as read:",a),t.toast.error("Failed to mark notification as read.")}},M=async()=>{try{await n.notificationsAPI.markAllAsRead(),z(a=>a.map(a=>({...a,isRead:!0,readAt:new Date().toISOString()}))),B(0)}catch(a){console.error("Failed to mark all as read:",a),t.toast.error("Failed to mark all as read.")}},N=async a=>{try{await n.notificationsAPI.deleteNotification(a),z(b=>{let c=b.find(b=>b._id===a),d=c&&!c.isRead?A-1:A;return B(Math.max(0,d)),b.filter(b=>b._id!==a)})}catch(a){console.error("Failed to delete notification:",a),t.toast.error("Failed to delete notification.")}},O=async()=>{if(confirm("Are you sure you want to clear all notifications?"))try{await n.notificationsAPI.clearAll(),z([]),B(0)}catch(a){console.error("Failed to clear notifications:",a),t.toast.error("Failed to clear notifications.")}},P=async b=>{b.isRead||await L(b._id),b.data?.link&&a.push(b.data.link)};return v?(0,b.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)(f.Bell,{className:"h-8 w-8 text-primary"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Notifications"}),A>0&&(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[A," unread"]})]})]}),(0,b.jsx)("div",{className:"flex items-center space-x-2",children:(0,b.jsxs)(r.default,{variant:"outline",size:"sm",onClick:K,disabled:C,children:[(0,b.jsx)(i.RefreshCw,{className:`h-4 w-4 mr-2 ${C?"animate-spin":""}`}),"Refresh"]})})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("button",{onClick:()=>{F("all"),H(1)},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${"all"===E?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:"All"}),(0,b.jsxs)("button",{onClick:()=>{F("unread"),H(1)},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${"unread"===E?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:["Unread ",A>0&&`(${A})`]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[A>0&&(0,b.jsxs)(r.default,{variant:"outline",size:"sm",onClick:M,children:[(0,b.jsx)(h.CheckCheck,{className:"h-4 w-4 mr-2"}),"Mark all read"]}),y.length>0&&(0,b.jsxs)(r.default,{variant:"outline",size:"sm",onClick:O,className:"text-destructive hover:text-destructive",children:[(0,b.jsx)(g.Trash2,{className:"h-4 w-4 mr-2"}),"Clear all"]})]})]}),C?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-muted rounded-full animate-pulse"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"h-8 bg-muted rounded w-48 animate-pulse"}),(0,b.jsx)("div",{className:"h-4 bg-muted rounded w-24 animate-pulse"})]})]}),(0,b.jsx)("div",{className:"h-9 bg-muted rounded w-24 animate-pulse"})]}),(0,b.jsx)(s.NotificationListSkeleton,{count:5})]}):0===y.length?(0,b.jsxs)("div",{className:"text-center py-16",children:[(0,b.jsx)(f.Bell,{className:"h-24 w-24 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"No notifications"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-6",children:"unread"===E?"No unread notifications":"You're all caught up!"}),(0,b.jsx)(e.default,{href:"/products",children:(0,b.jsx)(r.default,{children:"Browse Products"})})]}):(0,b.jsx)("div",{className:"space-y-2",children:y.map(a=>(0,b.jsx)("div",{onClick:()=>P(a),className:`relative p-4 rounded-lg border bg-card hover:bg-accent cursor-pointer transition-colors ${!a.isRead?"border-primary/50 bg-primary/5":""}`,children:(0,b.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,b.jsx)("div",{className:"flex-shrink-0 mt-1",children:(a=>{switch(a){case"order":return(0,b.jsx)(j.Package,{className:"h-5 w-5 text-blue-500"});case"message":return(0,b.jsx)(k.MessageCircle,{className:"h-5 w-5 text-green-500"});case"product":return(0,b.jsx)(j.Package,{className:"h-5 w-5 text-purple-500"});case"review":return(0,b.jsx)(l.Star,{className:"h-5 w-5 text-yellow-500"});case"payout":return(0,b.jsx)(m.DollarSign,{className:"h-5 w-5 text-emerald-500"});default:return(0,b.jsx)(f.Bell,{className:"h-5 w-5 text-muted-foreground"})}})(a.type)}),(0,b.jsx)("div",{className:"flex-1 min-w-0",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:`font-semibold mb-1 ${!a.isRead?"text-primary":""}`,children:a.title}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:a.message}),(0,b.jsxs)("div",{className:"flex items-center space-x-3 text-xs text-muted-foreground",children:[(0,b.jsx)("span",{children:(0,q.formatRelativeTime)(a.createdAt)}),a.isRead&&a.readAt&&(0,b.jsxs)("span",{children:["â€¢ Read ",(0,q.formatRelativeTime)(a.readAt)]})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[!a.isRead&&(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),L(a._id)},className:"p-2 hover:bg-primary/10 rounded-lg transition-colors",title:"Mark as read",children:(0,b.jsx)(h.CheckCheck,{className:"h-4 w-4 text-primary"})}),(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),N(a._id)},className:"p-2 hover:bg-destructive/10 rounded-lg transition-colors",title:"Delete",children:(0,b.jsx)(g.Trash2,{className:"h-4 w-4 text-destructive"})})]})]})})]})},a._id))}),I>1&&(0,b.jsxs)("div",{className:"flex justify-center mt-8 space-x-2",children:[(0,b.jsx)(r.default,{variant:"outline",onClick:()=>H(a=>Math.max(1,a-1)),disabled:1===G,children:"Previous"}),(0,b.jsxs)("span",{className:"px-4 py-2 text-sm text-muted-foreground",children:["Page ",G," of ",I]}),(0,b.jsx)(r.default,{variant:"outline",onClick:()=>H(a=>Math.min(I,a+1)),disabled:G===I,children:"Next"})]})]})}):null}a.s(["default",()=>u])}];

//# sourceMappingURL=frontend_636d5b5f._.js.map