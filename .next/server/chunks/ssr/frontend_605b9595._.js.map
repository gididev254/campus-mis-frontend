{"version":3,"sources":["../../../../../frontend/components/ui/Button.tsx","../../../../../frontend/components/ui/Input.tsx","../../../../../frontend/app/login/LoginPageClient.tsx"],"sourcesContent":["import React from 'react';\nimport { cn } from '@/lib/utils';\n\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: 'primary' | 'secondary' | 'outline' | 'ghost' | 'danger';\n  size?: 'sm' | 'md' | 'lg';\n  isLoading?: boolean;\n  loadingText?: string;\n}\n\nexport default function Button({\n  children,\n  className,\n  variant = 'primary',\n  size = 'md',\n  isLoading = false,\n  loadingText,\n  disabled,\n  ...props\n}: ButtonProps) {\n  const baseStyles = 'inline-flex items-center justify-center rounded-lg font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-ring disabled:opacity-50 disabled:pointer-events-none disabled:cursor-not-allowed';\n\n  const variants = {\n    primary: 'bg-primary text-primary-foreground hover:opacity-90 focus-visible:ring-primary',\n    secondary: 'bg-secondary text-secondary-foreground hover:opacity-90 focus-visible:ring-secondary',\n    outline: 'border border-border hover:bg-accent hover:text-accent-foreground focus-visible:ring-border',\n    ghost: 'hover:bg-accent hover:text-accent-foreground focus-visible:ring-accent',\n    danger: 'bg-destructive text-destructive-foreground hover:opacity-90 focus-visible:ring-destructive',\n  };\n\n  const sizes = {\n    sm: 'px-3 py-1.5 text-sm',\n    md: 'px-4 py-2 text-base',\n    lg: 'px-6 py-3 text-lg',\n  };\n\n  return (\n    <button\n      type={props.type || 'button'}\n      className={cn(baseStyles, variants[variant], sizes[size], className)}\n      disabled={disabled || isLoading}\n      aria-live={isLoading ? 'polite' : undefined}\n      aria-busy={isLoading}\n      {...props}\n    >\n      {isLoading ? (\n        <>\n          <svg\n            className=\"animate-spin -ml-1 mr-2 h-4 w-4\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            aria-hidden=\"true\"\n            role=\"img\"\n          >\n            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n          </svg>\n          <span>{loadingText || 'Loading...'}</span>\n        </>\n      ) : children}\n    </button>\n  );\n}\n","'use client';\n\nimport React from 'react';\nimport { cn } from '@/lib/utils';\n\ninterface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {\n  label?: string;\n  error?: string;\n  helperText?: string;\n}\n\nexport default function Input({ label, error, helperText, className, id, ...props }: InputProps) {\n  const generatedId = React.useId();\n  const inputId = id || generatedId;\n  const errorId = error ? `${inputId}-error` : undefined;\n  const helperId = helperText ? `${inputId}-helper` : undefined;\n  const describedBy = [errorId, helperId].filter(Boolean).join(' ') || undefined;\n\n  return (\n    <div className=\"w-full\">\n      {label && (\n        <label htmlFor={inputId} className=\"block text-sm font-medium mb-1.5 text-foreground\">\n          {label}\n          {props.required && (\n            <span className=\"text-destructive ml-1\" aria-label=\"required\">\n              *\n            </span>\n          )}\n        </label>\n      )}\n      <input\n        id={inputId}\n        aria-invalid={error ? 'true' : 'false'}\n        aria-describedby={describedBy}\n        aria-required={props.required ? 'true' : undefined}\n        className={cn(\n          'w-full px-4 py-2.5 rounded-lg border border-input bg-background text-foreground',\n          'placeholder:text-muted-foreground',\n          'focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent focus-visible:ring-2 focus-visible:ring-offset-2',\n          'disabled:opacity-50 disabled:cursor-not-allowed',\n          error && 'border-destructive focus:ring-destructive focus-visible:ring-destructive',\n          className\n        )}\n        {...props}\n      />\n      {error && (\n        <p id={errorId} className=\"mt-1 text-sm text-destructive\" role=\"alert\" aria-live=\"assertive\">\n          {error}\n        </p>\n      )}\n      {helperText && !error && (\n        <p id={helperId} className=\"mt-1 text-sm text-muted-foreground\">\n          {helperText}\n        </p>\n      )}\n    </div>\n  );\n}\n","'use client';\n\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { toast } from '@/components/ui/Toaster';\nimport Button from '@/components/ui/Button';\nimport Input from '@/components/ui/Input';\nimport { loginSchema, type LoginFormData } from '@/lib/validations';\n\nexport default function LoginPageClient() {\n  const router = useRouter();\n  const { login } = useAuth();\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors, isSubmitting },\n    setError,\n  } = useForm<LoginFormData>({\n    resolver: zodResolver(loginSchema),\n    mode: 'onBlur',\n  });\n\n  const onSubmit = async (data: LoginFormData) => {\n    try {\n      const result = await login(data.email, data.password);\n\n      // Show success toast\n      toast.success('Successfully logged in!');\n\n      // If password change is forced, redirect to change password page\n      if (result.forcePasswordChange) {\n        router.push('/change-password');\n      } else {\n        router.push('/');\n      }\n    } catch (err: unknown) {\n      const error = err as { response?: { data?: { message?: string } } };\n      const errorMessage = error.response?.data?.message || 'Login failed. Please try again.';\n      setError('root', { type: 'manual', message: errorMessage });\n      toast.error(errorMessage);\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto px-4 py-16\">\n      <div className=\"max-w-md mx-auto\">\n        <header className=\"text-center mb-8\">\n          <h1 className=\"text-3xl font-bold\">Welcome Back</h1>\n          <p className=\"text-muted-foreground mt-2\">Sign in to your account</p>\n        </header>\n\n        <main>\n          <div className=\"bg-card rounded-lg border p-8\">\n            {errors.root && (\n              <div className=\"mb-4 p-3 rounded-lg bg-destructive/10 text-destructive text-sm\" role=\"alert\" aria-live=\"assertive\">\n                {errors.root.message}\n              </div>\n            )}\n\n            <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-4\" noValidate aria-label=\"Login form\">\n              <Input\n                label=\"Email\"\n                type=\"email\"\n                placeholder=\"your.email@example.com\"\n                error={errors.email?.message}\n                required\n                autoComplete=\"email\"\n                {...register('email')}\n              />\n\n              <Input\n                label=\"Password\"\n                type=\"password\"\n                placeholder=\"••••••••\"\n                error={errors.password?.message}\n                required\n                autoComplete=\"current-password\"\n                {...register('password')}\n              />\n\n              <div className=\"flex items-center justify-between text-sm\">\n                <label className=\"flex items-center cursor-pointer\">\n                  <input\n                    type=\"checkbox\"\n                    className=\"mr-2 w-4 h-4 rounded border-input focus:ring-2 focus:ring-ring focus:ring-offset-2\"\n                    aria-label=\"Remember me on this device\"\n                  />\n                  <span>Remember me</span>\n                </label>\n                <Link href=\"/forgot-password\" className=\"text-primary hover:underline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-ring rounded px-2 py-1 -mx-2\">\n                  Forgot password?\n                </Link>\n              </div>\n\n              <Button\n                type=\"submit\"\n                className=\"w-full\"\n                isLoading={isSubmitting}\n                aria-live=\"polite\"\n              >\n                {isSubmitting ? 'Signing in...' : 'Sign In'}\n              </Button>\n            </form>\n\n            <p className=\"mt-6 text-center text-sm\">\n              <span className=\"text-muted-foreground\">Don't have an account?</span>{' '}\n              <Link href=\"/register\" className=\"text-primary hover:underline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-ring rounded px-2 py-1 -mx-2\">\n                Sign up\n              </Link>\n            </p>\n          </div>\n\n          {/* Contact Info */}\n          <aside className=\"mt-6 text-center text-sm text-muted-foreground\" aria-label=\"Help and support information\">\n            <p className=\"font-medium mb-2\">Need help?</p>\n            <p>\n              WhatsApp:{' '}\n              <a\n                href=\"https://wa.me/254111938368\"\n                className=\"text-primary hover:underline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-ring rounded px-2 py-1 -mx-2\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                0111938368\n              </a>\n            </p>\n            <p>\n              Email:{' '}\n              <a\n                href=\"mailto:gedionmutua2024@gmail.com\"\n                className=\"text-primary hover:underline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-ring rounded px-2 py-1 -mx-2\"\n              >\n                gedionmutua2024@gmail.com\n              </a>\n            </p>\n          </aside>\n        </main>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}