module.exports=[92522,a=>{"use strict";var b=a.i(57850),c=a.i(13916);function d({children:a,className:d,variant:e="primary",size:f="md",isLoading:g=!1,loadingText:h,disabled:i,...j}){return(0,b.jsx)("button",{type:j.type||"button",className:(0,c.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-ring disabled:opacity-50 disabled:pointer-events-none disabled:cursor-not-allowed",{primary:"bg-primary text-primary-foreground hover:opacity-90 focus-visible:ring-primary",secondary:"bg-secondary text-secondary-foreground hover:opacity-90 focus-visible:ring-secondary",outline:"border border-border hover:bg-accent hover:text-accent-foreground focus-visible:ring-border",ghost:"hover:bg-accent hover:text-accent-foreground focus-visible:ring-accent",danger:"bg-destructive text-destructive-foreground hover:opacity-90 focus-visible:ring-destructive"}[e],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[f],d),disabled:i||g,"aria-live":g?"polite":void 0,"aria-busy":g,...j,children:g?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",role:"img",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,b.jsx)("span",{children:h||"Loading..."})]}):a})}a.s(["default",()=>d])},41379,a=>{"use strict";let b=(0,a.i(31261).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],41379)},57039,a=>{"use strict";let b=(0,a.i(31261).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);a.s(["Lock",()=>b],57039)},59624,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(93609),e=a.i(57039),f=a.i(41379);let g=(0,a.i(31261).default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var h=a.i(65718),i=a.i(18521),j=a.i(1892),k=a.i(35971);a.i(59888);var l=a.i(98534),m=a.i(84588),n=a.i(60328),o=a.i(53141),p=a.i(92522);function q(){let a=(0,d.useRouter)(),{user:q,logout:r,forcePasswordChange:s}=(0,k.useAuth)(),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(!1),{register:B,handleSubmit:C,watch:D,formState:{errors:E,isSubmitting:F},setError:G}=(0,i.useForm)({resolver:(0,j.zodResolver)(n.passwordChangeSchema),mode:"onBlur"}),H=D("newPassword"),I=D("confirmPassword");D("currentPassword");let J=(0,o.getPasswordStrength)(H||"");(0,c.useEffect)(()=>{q||s||a.push("/login")},[q,s,a]);let K=async b=>{if(b.currentPassword===b.newPassword)return void G("newPassword",{type:"manual",message:"New password must be different from current password"});try{await m.authAPI.changePassword({currentPassword:b.currentPassword,newPassword:b.newPassword}),A(!0),l.toast.success("Password changed successfully!"),setTimeout(()=>{r(),a.push("/login?passwordChanged=true")},2e3)}catch(b){let a=b.response?.data?.message||"Failed to change password";G("root",{type:"manual",message:a}),l.toast.error(a)}};return z?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background px-4",children:(0,b.jsxs)("div",{className:"max-w-md w-full text-center",children:[(0,b.jsx)("div",{className:"mb-6 flex justify-center",children:(0,b.jsx)("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center",children:(0,b.jsx)(h.CheckCircle,{className:"w-12 h-12 text-green-600 dark:text-green-400"})})}),(0,b.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Password Changed!"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-6",children:"Your password has been successfully updated. You will be redirected to login shortly."}),(0,b.jsx)(p.default,{onClick:()=>{r(),a.push("/login?passwordChanged=true")},className:"w-full",children:"Continue to Login"})]})}):(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background px-4 py-12",children:(0,b.jsxs)("div",{className:"max-w-md w-full",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("div",{className:"mb-4 flex justify-center",children:(0,b.jsx)("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center",children:(0,b.jsx)(e.Lock,{className:"w-8 h-8 text-primary"})})}),(0,b.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Change Your Password"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:s?"You must change your password before continuing. Please enter your current password and choose a new one.":"Enter your current password and choose a new one."})]}),(0,b.jsx)("div",{className:"bg-card border rounded-lg p-6 shadow-sm",children:(0,b.jsxs)("form",{onSubmit:C(K),className:"space-y-4",noValidate:!0,children:[E.root&&(0,b.jsx)("div",{className:"p-3 rounded-lg bg-destructive/10 border border-destructive/20 text-destructive text-sm",children:E.root.message}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Current Password"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{...B("currentPassword"),type:t?"text":"password",className:`w-full px-4 py-3 pr-12 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-ring ${E.currentPassword?"border-destructive focus:ring-destructive":"border-input"}`,placeholder:"Enter current password"}),(0,b.jsx)("button",{type:"button",onClick:()=>u(!t),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:t?(0,b.jsx)(g,{className:"h-5 w-5"}):(0,b.jsx)(f.Eye,{className:"h-5 w-5"})})]}),E.currentPassword&&(0,b.jsx)("p",{className:"mt-1 text-sm text-destructive",children:E.currentPassword.message})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"New Password"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{...B("newPassword"),type:v?"text":"password",className:`w-full px-4 py-3 pr-12 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-ring ${E.newPassword?"border-destructive focus:ring-destructive":"border-input"}`,placeholder:"Enter new password (min 12 characters)"}),(0,b.jsx)("button",{type:"button",onClick:()=>w(!v),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:v?(0,b.jsx)(g,{className:"h-5 w-5"}):(0,b.jsx)(f.Eye,{className:"h-5 w-5"})})]}),E.newPassword&&(0,b.jsx)("p",{className:"mt-1 text-sm text-destructive",children:E.newPassword.message}),H&&(0,b.jsxs)("div",{className:"mt-2 p-3 rounded-lg bg-muted/50 space-y-2",children:[(0,b.jsx)("p",{className:"text-xs font-medium mb-2",children:"Password Requirements:"}),(0,b.jsxs)("ul",{className:"space-y-1 text-xs",children:[(0,b.jsxs)("li",{className:H?.length>=12?"text-green-600 dark:text-green-400":"text-muted-foreground",children:[H?.length>=12?"✓":"○"," At least 12 characters"]}),(0,b.jsxs)("li",{className:/[a-z]/.test(H||"")?"text-green-600 dark:text-green-400":"text-muted-foreground",children:[/[a-z]/.test(H||"")?"✓":"○"," One lowercase letter (a-z)"]}),(0,b.jsxs)("li",{className:/[A-Z]/.test(H||"")?"text-green-600 dark:text-green-400":"text-muted-foreground",children:[/[A-Z]/.test(H||"")?"✓":"○"," One uppercase letter (A-Z)"]}),(0,b.jsxs)("li",{className:/[0-9]/.test(H||"")?"text-green-600 dark:text-green-400":"text-muted-foreground",children:[/[0-9]/.test(H||"")?"✓":"○"," One number (0-9)"]}),(0,b.jsxs)("li",{className:/[@$!%*?&]/.test(H||"")?"text-green-600 dark:text-green-400":"text-muted-foreground",children:[/[@$!%*?&]/.test(H||"")?"✓":"○"," One special character (@$!%*?&)"]})]}),(0,b.jsx)("div",{className:"flex gap-1 mt-2",children:[1,2,3,4].map(a=>(0,b.jsx)("div",{className:`h-1.5 flex-1 rounded-full transition-colors ${a<=J.score?J.color:"bg-gray-200 dark:bg-gray-700"}`},a))}),J.label&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Password strength: ",(0,b.jsx)("span",{className:`font-medium ${J.score<=1?"text-red-500":2===J.score?"text-orange-500":3===J.score?"text-yellow-600":"text-green-600"}`,children:J.label})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Confirm New Password"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{...B("confirmPassword"),type:x?"text":"password",className:`w-full px-4 py-3 pr-12 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-ring ${E.confirmPassword?"border-destructive focus:ring-destructive":"border-input"}`,placeholder:"Confirm new password"}),(0,b.jsx)("button",{type:"button",onClick:()=>y(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:x?(0,b.jsx)(g,{className:"h-5 w-5"}):(0,b.jsx)(f.Eye,{className:"h-5 w-5"})})]}),E.confirmPassword&&(0,b.jsx)("p",{className:"mt-1 text-sm text-destructive",children:E.confirmPassword.message}),I&&H&&(0,b.jsx)("div",{className:`text-xs mt-1 ${H===I?"text-green-600 dark:text-green-400":"text-destructive"}`,children:H===I?"✓ Passwords match":"✗ Passwords do not match"})]}),(0,b.jsx)(p.default,{type:"submit",size:"lg",className:"w-full",isLoading:F,children:"Change Password"})]})}),s&&(0,b.jsx)("div",{className:"mt-6 p-4 rounded-lg bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800",children:(0,b.jsxs)("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:[(0,b.jsx)("strong",{children:"Important:"})," You cannot access other features until you change your password."]})}),!s&&(0,b.jsx)("div",{className:"mt-6 text-center",children:(0,b.jsx)("button",{type:"button",onClick:()=>a.back(),className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:"← Go back"})}),(0,b.jsxs)("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:[(0,b.jsx)("p",{className:"font-medium mb-2",children:"Having trouble?"}),(0,b.jsxs)("p",{children:["WhatsApp: ",(0,b.jsx)("a",{href:"https://wa.me/254111938368",className:"text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",children:"0111938368"})]}),(0,b.jsxs)("p",{children:["Email: ",(0,b.jsx)("a",{href:"mailto:gedionmutua2024@gmail.com",className:"text-primary hover:underline",children:"gedionmutua2024@gmail.com"})]})]})]})})}a.s(["default",()=>q],59624)}];

//# sourceMappingURL=frontend_d90947a7._.js.map